modapi=new ModAPI;modapi.manifest=crapi.manifest();var protocol="https://",domain="soundation.com",global={path:{home:protocol+domain,login:protocol+domain+"?login=yes",feed:protocol+domain+"/feed",api:protocol+"api."+domain+"/me",profile:protocol+domain+"/account/profile"},storageModel:{options:{},version:""},optionDefaults:{showAlertsOnTop:!1,userTags:!0,userTagLinks:!1,moveCommentBox:!0,groupFilters:!0,moveGroupInvites:!0}};
function ModAPI(){console.log("%cModAPI%c :: Init","font-weight: bold; color: #f60","");this.DEFAULT_CALLBACK=function(){}}
ModAPI.prototype.login=function(d){function e(a){$.getJSON(global.path.api).fail(function(a,c){console.error("%cModAPI%c :: Unable to connect to Soundation API","font-weight: bold; color: #f60","")}).success(function(b){var c=b.data||b;c.success=b.success;a(c)})}"undefined"==typeof d&&(d=this.DEFAULT_CALLBACK);console.log("%cModAPI%c :: Login","font-weight: bold; color: #f60","");$.get(global.path.home,function(a){a=a.deres();a=$(a);var b=a.find(".user-link").attr("href"),c=a.filter("[name=csrf-token]").attr("content");
e(function(a){a.link=b;global.token=c;d(a)})})};ModAPI.prototype.token=function(){return global.token};
