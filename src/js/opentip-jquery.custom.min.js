var Opentip,firstAdapter,i,mouseMoved,mousePosition,mousePositionObservers,position,vendors,_i,_len,_ref,__slice=[].slice,__indexOf=[].indexOf||function(b){for(var a=0,c=this.length;a<c;a++)if(a in this&&this[a]===b)return a;return-1},__hasProp={}.hasOwnProperty;
Opentip=function(){function b(a,c,d,f){var g,e,h,m=this;this.id=++b.lastId;this.debug("Creating Opentip.");b.tips.push(this);this.adapter=b.adapter;g=this.adapter.data(a,"opentips")||[];g.push(this);this.adapter.data(a,"opentips",g);this.triggerElement=this.adapter.wrap(a);if(1<this.triggerElement.length)throw Error("You can't call Opentip on multiple elements.");if(1>this.triggerElement.length)throw Error("Invalid element.");this.waitingToHide=this.waitingToShow=this.visible=this.loading=this.loaded=
!1;this.currentPosition={left:0,top:0};this.dimensions={width:100,height:50};this.content="";this.redraw=!0;this.currentObservers={showing:!1,visible:!1,hiding:!1,hidden:!1};f=this.adapter.clone(f);"object"===typeof c?(f=c,c=d=void 0):"object"===typeof d&&(f=d,d=void 0);null!=d&&(f.title=d);null!=c&&this.setContent(c);null==f["extends"]&&(f["extends"]=null!=f.style?f.style:b.defaultStyle);a=[f];for(d=f;d["extends"];){c=d["extends"];d=b.styles[c];if(null==d)throw Error("Invalid style: "+c);a.unshift(d);
null==d["extends"]&&"standard"!==c&&(d["extends"]="standard")}f=(h=this.adapter).extend.apply(h,[{}].concat(__slice.call(a)));f.hideTriggers=function(){var a,d,c,b;c=f.hideTriggers;b=[];a=0;for(d=c.length;a<d;a++)e=c[a],b.push(e);return b}();f.hideTrigger&&0===f.hideTriggers.length&&f.hideTriggers.push(f.hideTrigger);d=["tipJoint","targetJoint","stem"];a=0;for(c=d.length;a<c;a++)h=d[a],f[h]&&"string"===typeof f[h]&&(f[h]=new b.Joint(f[h]));!f.ajax||!0!==f.ajax&&f.ajax||("A"===this.adapter.tagName(this.triggerElement)?
f.ajax=this.adapter.attr(this.triggerElement,"href"):f.ajax=!1);"click"===f.showOn&&"A"===this.adapter.tagName(this.triggerElement)&&this.adapter.observe(this.triggerElement,"click",function(a){a.preventDefault();a.stopPropagation();return a.stopped=!0});f.target&&(f.fixed=!0);!0===f.stem&&(f.stem=new b.Joint(f.tipJoint));!0===f.target?f.target=this.triggerElement:f.target&&(f.target=this.adapter.wrap(f.target));this.currentStem=f.stem;null==f.delay&&(f.delay="mouseover"===f.showOn?.2:0);null==f.targetJoint&&
(f.targetJoint=(new b.Joint(f.tipJoint)).flip());this.showTriggers=[];this.showTriggersWhenVisible=[];this.hideTriggers=[];f.showOn&&"creation"!==f.showOn&&this.showTriggers.push({element:this.triggerElement,event:f.showOn});null!=f.ajaxCache&&(f.cache=f.ajaxCache,delete f.ajaxCache);this.options=f;this.bound={};d=["prepareToShow","prepareToHide","show","hide","reposition"];a=0;for(c=d.length;a<c;a++)h=d[a],this.bound[h]=function(a){return function(){return m[a].apply(m,arguments)}}(h);this.adapter.domReady(function(){m.activate();
if("creation"===m.options.showOn)return m.prepareToShow()})}b.prototype.STICKS_OUT_TOP=1;b.prototype.STICKS_OUT_BOTTOM=2;b.prototype.STICKS_OUT_LEFT=1;b.prototype.STICKS_OUT_RIGHT=2;b.prototype["class"]={container:"opentip-container",opentip:"opentip",header:"ot-header",content:"ot-content",loadingIndicator:"ot-loading-indicator",close:"ot-close",goingToHide:"ot-going-to-hide",hidden:"ot-hidden",hiding:"ot-hiding",goingToShow:"ot-going-to-show",showing:"ot-showing",visible:"ot-visible",loading:"ot-loading",
ajaxError:"ot-ajax-error",fixed:"ot-fixed",showEffectPrefix:"ot-show-effect-",hideEffectPrefix:"ot-hide-effect-",stylePrefix:"style-"};b.cache={};b.prototype._setup=function(){var a,c,d,f,b,e;this.debug("Setting up the tooltip.");this._buildContainer();this.hideTriggers=[];e=this.options.hideTriggers;a=f=0;for(b=e.length;f<b;a=++f){c=e[a];d=null;a=this.options.hideOn instanceof Array?this.options.hideOn[a]:this.options.hideOn;if("string"===typeof c)switch(c){case "trigger":a=a||"mouseout";d=this.triggerElement;
break;case "tip":a=a||"mouseover";d=this.container;break;case "target":a=a||"mouseover";d=this.options.target;break;case "closeButton":break;default:throw Error("Unknown hide trigger: "+c+".");}else a=a||"mouseover",d=this.adapter.wrap(c);d&&this.hideTriggers.push({element:d,event:a,original:c})}b=this.hideTriggers;e=[];d=0;for(f=b.length;d<f;d++)c=b[d],e.push(this.showTriggersWhenVisible.push({element:c.element,event:"mouseover"}));return e};b.prototype._buildContainer=function(){this.container=
this.adapter.create('<div id="opentip-'+this.id+'" class="'+this["class"].container+" "+this["class"].hidden+" "+this["class"].stylePrefix+this.options.className+'"></div>');this.adapter.css(this.container,{position:"absolute"});this.options.ajax&&this.adapter.addClass(this.container,this["class"].loading);this.options.fixed&&this.adapter.addClass(this.container,this["class"].fixed);this.options.showEffect&&this.adapter.addClass(this.container,""+this["class"].showEffectPrefix+this.options.showEffect);
if(this.options.hideEffect)return this.adapter.addClass(this.container,""+this["class"].hideEffectPrefix+this.options.hideEffect)};b.prototype._buildElements=function(){var a,c;this.tooltipElement=this.adapter.create('<div class="'+this["class"].opentip+'"><div class="'+this["class"].header+'"></div><div class="'+this["class"].content+'"></div></div>');this.backgroundCanvas=this.adapter.wrap(document.createElement("canvas"));this.adapter.css(this.backgroundCanvas,{position:"absolute"});"undefined"!==
typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.adapter.unwrap(this.backgroundCanvas));a=this.adapter.find(this.tooltipElement,"."+this["class"].header);this.options.title&&(c=this.adapter.create("<h1></h1>"),this.adapter.update(c,this.options.title,this.options.escapeTitle),this.adapter.append(a,c));this.options.ajax&&!this.loaded&&this.adapter.append(this.tooltipElement,this.adapter.create('<div class="'+this["class"].loadingIndicator+'"><span>\u21bb</span></div>'));
0<=__indexOf.call(this.options.hideTriggers,"closeButton")&&(this.closeButtonElement=this.adapter.create('<a href="javascript:undefined;" class="'+this["class"].close+'"><span>Close</span></a>'),this.adapter.append(a,this.closeButtonElement));this.adapter.append(this.container,this.backgroundCanvas);this.adapter.append(this.container,this.tooltipElement);this.adapter.append(document.body,this.container);return this.redraw=this._newContent=!0};b.prototype.setContent=function(a){this.content=a;this._newContent=
!0;"function"===typeof this.content?(this._contentFunction=this.content,this.content=""):this._contentFunction=null;if(this.visible)return this._updateElementContent()};b.prototype._updateElementContent=function(){var a;if(this._newContent||!this.options.cache&&this._contentFunction)a=this.adapter.find(this.container,"."+this["class"].content),null!=a&&(this._contentFunction&&(this.debug("Executing content function."),this.content=this._contentFunction(this)),this.adapter.update(a,this.content,this.options.escapeContent)),
this._newContent=!1;this._storeAndLockDimensions();return this.reposition()};b.prototype._storeAndLockDimensions=function(){var a;if(this.container&&(a=this.dimensions,this.adapter.css(this.container,{width:"auto",left:"0px",top:"0px"}),this.dimensions=this.adapter.dimensions(this.container),this.dimensions.width+=1,this.adapter.css(this.container,{width:""+this.dimensions.width+"px",top:""+this.currentPosition.top+"px",left:""+this.currentPosition.left+"px"}),!this._dimensionsEqual(this.dimensions,
a)))return this.redraw=!0,this._draw()};b.prototype.activate=function(){return this._setupObservers("hidden","hiding")};b.prototype.deactivate=function(){this.debug("Deactivating tooltip.");this.hide();return this._setupObservers("-showing","-visible","-hidden","-hiding")};b.prototype._setupObservers=function(){var a,c,d,f,b,e,h,m,l,k=this;f=1<=arguments.length?__slice.call(arguments,0):[];b=0;for(h=f.length;b<h;b++)if(d=f[b],c=!1,"-"===d.charAt(0)&&(c=!0,d=d.substr(1)),this.currentObservers[d]!==
!c)switch(this.currentObservers[d]=!c,a=function(){var a,d,f;a=1<=arguments.length?__slice.call(arguments,0):[];return c?(d=k.adapter).stopObserving.apply(d,a):(f=k.adapter).observe.apply(f,a)},d){case "showing":l=this.hideTriggers;e=0;for(m=l.length;e<m;e++)d=l[e],a(d.element,d.event,this.bound.prepareToHide);a(null!=document.onresize?document:window,"resize",this.bound.reposition);a(window,"scroll",this.bound.reposition);break;case "visible":l=this.showTriggersWhenVisible;e=0;for(m=l.length;e<m;e++)d=
l[e],a(d.element,d.event,this.bound.prepareToShow);break;case "hiding":l=this.showTriggers;e=0;for(m=l.length;e<m;e++)d=l[e],a(d.element,d.event,this.bound.prepareToShow);break;case "hidden":break;default:throw Error("Unknown state: "+d);}return null};b.prototype.prepareToShow=function(){this._abortHiding();this._abortShowing();if(!this.visible)return this.debug("Showing in "+this.options.delay+"s."),null==this.container&&this._setup(),this.options.group&&b._abortShowingGroup(this.options.group,this),
this.preparingToShow=!0,this._setupObservers("-hidden","-hiding","showing"),this._followMousePosition(),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this._showTimeoutId=this.setTimeout(this.bound.show,this.options.delay||0)};b.prototype.show=function(){var a=this;this._abortHiding();if(!this.visible){this._clearTimeouts();if(!this._triggerElementExists())return this.deactivate();this.debug("Showing now.");null==this.container&&this._setup();
this.options.group&&b._hideGroup(this.options.group,this);this.visible=!0;this.preparingToShow=!1;null==this.tooltipElement&&this._buildElements();this._updateElementContent();!this.options.ajax||this.loaded&&this.options.cache||this._loadAjax();this._searchAndActivateCloseButtons();this._startEnsureTriggerElement();this.adapter.css(this.container,{zIndex:b.lastZIndex++});this._setupObservers("-hidden","-hiding","-showing","-visible","showing","visible");this.options.fixed&&!this.options.target&&
(this.initialMousePosition=mousePosition);this.reposition();this.adapter.removeClass(this.container,this["class"].hiding);this.adapter.removeClass(this.container,this["class"].hidden);this.adapter.addClass(this.container,this["class"].goingToShow);this.setCss3Style(this.container,{transitionDuration:"0s"});this.defer(function(){var c;if(a.visible&&!a.preparingToHide)return a.adapter.removeClass(a.container,a["class"].goingToShow),a.adapter.addClass(a.container,a["class"].showing),c=0,a.options.showEffect&&
a.options.showEffectDuration&&(c=a.options.showEffectDuration),a.setCss3Style(a.container,{transitionDuration:""+c+"s"}),a._visibilityStateTimeoutId=a.setTimeout(function(){a.adapter.removeClass(a.container,a["class"].showing);return a.adapter.addClass(a.container,a["class"].visible)},c),a._activateFirstInput()});return this._draw()}};b.prototype._abortShowing=function(){if(this.preparingToShow)return this.debug("Aborting showing."),this._clearTimeouts(),this._stopFollowingMousePosition(),this.preparingToShow=
!1,this._setupObservers("-showing","-visible","hiding","hidden")};b.prototype.prepareToHide=function(){this._abortShowing();this._abortHiding();if(this.visible)return this.debug("Hiding in "+this.options.hideDelay+"s"),this.preparingToHide=!0,this._setupObservers("-showing","visible","-hidden","hiding"),this._hideTimeoutId=this.setTimeout(this.bound.hide,this.options.hideDelay)};b.prototype.hide=function(){var a=this;this._abortShowing();if(this.visible&&(this._clearTimeouts(),this.debug("Hiding!"),
this.preparingToHide=this.visible=!1,this._stopEnsureTriggerElement(),this._setupObservers("-showing","-visible","-hiding","-hidden","hiding","hidden"),this.options.fixed||this._stopFollowingMousePosition(),this.container))return this.adapter.removeClass(this.container,this["class"].visible),this.adapter.removeClass(this.container,this["class"].showing),this.adapter.addClass(this.container,this["class"].goingToHide),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var c;
a.adapter.removeClass(a.container,a["class"].goingToHide);a.adapter.addClass(a.container,a["class"].hiding);c=0;a.options.hideEffect&&a.options.hideEffectDuration&&(c=a.options.hideEffectDuration);a.setCss3Style(a.container,{transitionDuration:""+c+"s"});return a._visibilityStateTimeoutId=a.setTimeout(function(){a.adapter.removeClass(a.container,a["class"].hiding);a.adapter.addClass(a.container,a["class"].hidden);a.setCss3Style(a.container,{transitionDuration:"0s"});if(a.options.removeElementsOnHide)return a.debug("Removing HTML elements."),
a.adapter.remove(a.container),delete a.container,delete a.tooltipElement},c)})};b.prototype._abortHiding=function(){if(this.preparingToHide)return this.debug("Aborting hiding."),this._clearTimeouts(),this.preparingToHide=!1,this._setupObservers("-hiding","showing","visible")};b.prototype.reposition=function(){var a,c,d=this;a=this.getPosition();if(null!=a&&(c=this.options.stem,this.options.containInViewport&&(c=this._ensureViewportContainment(a),a=c.position,c=c.stem),!this._positionsEqual(a,this.currentPosition)))return this.options.stem&&
!c.eql(this.currentStem)&&(this.redraw=!0),this.currentPosition=a,this.currentStem=c,this._draw(),this.adapter.css(this.container,{left:""+a.left+"px",top:""+a.top+"px"}),this.defer(function(){var a;a=d.adapter.unwrap(d.container);a.style.visibility="hidden";return a.style.visibility="visible"})};b.prototype.getPosition=function(a,c,d){var f,b,e,h;if(this.container)return null==a&&(a=this.options.tipJoint),null==c&&(c=this.options.targetJoint),this.options.target?(e=this.adapter.offset(this.options.target),
f=this.adapter.dimensions(this.options.target),c.right?(h=this.adapter.unwrap(this.options.target),e.left=null!=h.getBoundingClientRect?h.getBoundingClientRect().right+(null!=(b=window.pageXOffset)?b:document.body.scrollLeft):e.left+f.width):c.center&&(e.left+=Math.round(f.width/2)),c.bottom?e.top+=f.height:c.middle&&(e.top+=Math.round(f.height/2)),this.options.borderWidth&&(this.options.tipJoint.left&&(e.left+=this.options.borderWidth),this.options.tipJoint.right&&(e.left-=this.options.borderWidth),
this.options.tipJoint.top?e.top+=this.options.borderWidth:this.options.tipJoint.bottom&&(e.top-=this.options.borderWidth))):e=this.initialMousePosition?{top:this.initialMousePosition.y,left:this.initialMousePosition.x}:{top:mousePosition.y,left:mousePosition.x},this.options.autoOffset&&(b=(h=this.options.stem?this.options.stemLength:0)&&this.options.fixed?2:10,c=a.middle&&!this.options.fixed?15:0,f=a.center&&!this.options.fixed?15:0,a.right?e.left-=b+c:a.left&&(e.left+=b+c),a.bottom?e.top-=b+f:a.top&&
(e.top+=b+f),h&&(null==d&&(d=this.options.stem),d.right?e.left-=h:d.left&&(e.left+=h),d.bottom?e.top-=h:d.top&&(e.top+=h))),e.left+=this.options.offset[0],e.top+=this.options.offset[1],a.right?e.left-=this.dimensions.width:a.center&&(e.left-=Math.round(this.dimensions.width/2)),a.bottom?e.top-=this.dimensions.height:a.middle&&(e.top-=Math.round(this.dimensions.height/2)),e};b.prototype._ensureViewportContainment=function(a){var c,d,f,g,e,h,m,l;e=this.options.stem;d={position:a,stem:e};if(!this.visible||
!a)return d;h=this._sticksOut(a);if(!h[0]&&!h[1])return d;l=new b.Joint(this.options.tipJoint);this.options.targetJoint&&(m=new b.Joint(this.options.targetJoint));this.adapter.scrollOffset();c=this.adapter.viewportDimensions();a=!1;if(c.width>=this.dimensions.width&&h[0])switch(a=!0,h[0]){case this.STICKS_OUT_LEFT:l.setHorizontal("left");this.options.targetJoint&&m.setHorizontal("right");break;case this.STICKS_OUT_RIGHT:l.setHorizontal("right"),this.options.targetJoint&&m.setHorizontal("left")}if(c.height>=
this.dimensions.height&&h[1])switch(a=!0,h[1]){case this.STICKS_OUT_TOP:l.setVertical("top");this.options.targetJoint&&m.setVertical("bottom");break;case this.STICKS_OUT_BOTTOM:l.setVertical("bottom"),this.options.targetJoint&&m.setVertical("top")}if(!a)return d;this.options.stem&&(e=l);a=this.getPosition(l,m,e);c=this._sticksOut(a);g=f=!1;c[0]&&c[0]!==h[0]&&(f=!0,l.setHorizontal(this.options.tipJoint.horizontal),this.options.targetJoint&&m.setHorizontal(this.options.targetJoint.horizontal));c[1]&&
c[1]!==h[1]&&(g=!0,l.setVertical(this.options.tipJoint.vertical),this.options.targetJoint&&m.setVertical(this.options.targetJoint.vertical));if(f&&g)return d;if(f||g)this.options.stem&&(e=l),a=this.getPosition(l,m,e);return{position:a,stem:e}};b.prototype._sticksOut=function(a){var c,d;c=this.adapter.scrollOffset();d=this.adapter.viewportDimensions();a=[a.left-c[0],a.top-c[1]];c=[!1,!1];0>a[0]?c[0]=this.STICKS_OUT_LEFT:a[0]+this.dimensions.width>d.width&&(c[0]=this.STICKS_OUT_RIGHT);0>a[1]?c[1]=this.STICKS_OUT_TOP:
a[1]+this.dimensions.height>d.height&&(c[1]=this.STICKS_OUT_BOTTOM);return c};b.prototype._draw=function(){var a,c,d,f,g,e,h,m,l,k,s,t,n,q,r,p=this;if(this.backgroundCanvas&&this.redraw){this.debug("Drawing background.");this.redraw=!1;if(this.currentStem){c=["top","right","bottom","left"];g=0;for(a=c.length;g<a;g++)h=c[g],this.adapter.removeClass(this.container,"stem-"+h);this.adapter.addClass(this.container,"stem-"+this.currentStem.horizontal);this.adapter.addClass(this.container,"stem-"+this.currentStem.vertical)}l=
[0,0];g=[0,0];0<=__indexOf.call(this.options.hideTriggers,"closeButton")&&(m=new b.Joint("top right"===(null!=(e=this.currentStem)?e.toString():void 0)?"top left":"top right"),l=[this.options.closeButtonRadius+this.options.closeButtonOffset[0],this.options.closeButtonRadius+this.options.closeButtonOffset[1]],g=[this.options.closeButtonRadius-this.options.closeButtonOffset[0],this.options.closeButtonRadius-this.options.closeButtonOffset[1]]);e=this.adapter.clone(this.dimensions);h=[0,0];this.options.borderWidth&&
(e.width+=2*this.options.borderWidth,e.height+=2*this.options.borderWidth,h[0]-=this.options.borderWidth,h[1]-=this.options.borderWidth);this.options.shadow&&(e.width+=2*this.options.shadowBlur,e.width+=Math.max(0,this.options.shadowOffset[0]-2*this.options.shadowBlur),e.height+=2*this.options.shadowBlur,e.height+=Math.max(0,this.options.shadowOffset[1]-2*this.options.shadowBlur),h[0]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[0]),h[1]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[1]));
f=d=c=a=0;this.currentStem&&(this.currentStem.left?a=this.options.stemLength:this.currentStem.right&&(c=this.options.stemLength),this.currentStem.top?d=this.options.stemLength:this.currentStem.bottom&&(f=this.options.stemLength));m&&(m.left?a=Math.max(a,g[0]):m.right&&(c=Math.max(c,g[0])),m.top?d=Math.max(d,g[1]):m.bottom&&(f=Math.max(f,g[1])));e.width+=a+c;e.height+=d+f;h[0]-=a;h[1]-=d;this.currentStem&&this.options.borderWidth&&(g=this._getPathStemMeasures(this.options.stemBase,this.options.stemLength,
this.options.borderWidth),r=g.stemLength,q=g.stemBase);g=this.adapter.unwrap(this.backgroundCanvas);g.width=e.width;g.height=e.height;this.adapter.css(this.backgroundCanvas,{width:""+g.width+"px",height:""+g.height+"px",left:""+h[0]+"px",top:""+h[1]+"px"});k=g.getContext("2d");k.setTransform(1,0,0,1,0,0);k.clearRect(0,0,g.width,g.height);k.beginPath();k.fillStyle=this._getColor(k,this.dimensions,this.options.background,this.options.backgroundGradientHorizontal);k.lineJoin="miter";k.miterLimit=500;
n=this.options.borderWidth/2;this.options.borderWidth?(k.strokeStyle=this.options.borderColor,k.lineWidth=this.options.borderWidth):(r=this.options.stemLength,q=this.options.stemBase);null==q&&(q=0);t=function(a,d,c){c&&k.moveTo(Math.max(q,p.options.borderRadius,l[0])+1-n,-n);if(d)return k.lineTo(a/2-q/2,-n),k.lineTo(a/2,-r-n),k.lineTo(a/2+q/2,-n)};s=function(a,d,c){var b;if(a)return k.lineTo(-q+n,0-n),k.lineTo(r+n,-r-n),k.lineTo(n,q-n);if(d)return d=p.options.closeButtonOffset,a=l[0],0!==c%2&&(d=
[d[1],d[0]],a=l[1]),c=Math.acos(d[1]/p.options.closeButtonRadius),b=Math.acos(d[0]/p.options.closeButtonRadius),k.lineTo(-a+n,-n),k.arc(n-d[0],-n+d[1],p.options.closeButtonRadius,-(Math.PI/2+c),b,!1);k.lineTo(-p.options.borderRadius+n,-n);return k.quadraticCurveTo(n,-n,n,p.options.borderRadius-n)};k.translate(-h[0],-h[1]);k.save();(function(){var a,d,c,f,e,g,h,l,n,q;q=[];d=l=0;for(n=b.positions.length/2;0<=n?l<n:l>n;d=0<=n?++l:--l)a=2*d,e=0===d||3===d?0:p.dimensions.width,g=2>d?0:p.dimensions.height,
h=Math.PI/2*d,c=0===d%2?p.dimensions.width:p.dimensions.height,f=new b.Joint(b.positions[a]),a=new b.Joint(b.positions[a+1]),k.save(),k.translate(e,g),k.rotate(h),t(c,f.eql(p.currentStem),0===d),k.translate(c,0),s(a.eql(p.currentStem),a.eql(m),d),q.push(k.restore());return q})();k.closePath();k.save();this.options.shadow&&(k.shadowColor=this.options.shadowColor,k.shadowBlur=this.options.shadowBlur,k.shadowOffsetX=this.options.shadowOffset[0],k.shadowOffsetY=this.options.shadowOffset[1]);k.fill();
k.restore();this.options.borderWidth&&k.stroke();k.restore();if(m)return function(){var a,d;"top right"===m.toString()?(d=[p.dimensions.width-p.options.closeButtonOffset[0],p.options.closeButtonOffset[1]],a=[d[0]+n,d[1]-n]):(d=[p.options.closeButtonOffset[0],p.options.closeButtonOffset[1]],a=[d[0]-n,d[1]-n]);k.translate(a[0],a[1]);a=p.options.closeButtonCrossSize/2;k.save();k.beginPath();k.strokeStyle=p.options.closeButtonCrossColor;k.lineWidth=p.options.closeButtonCrossLineWidth;k.lineCap="round";
k.moveTo(-a,-a);k.lineTo(a,a);k.stroke();k.beginPath();k.moveTo(a,-a);k.lineTo(-a,a);k.stroke();k.restore();return p.adapter.css(p.closeButtonElement,{left:""+(d[0]-a-p.options.closeButtonLinkOverscan)+"px",top:""+(d[1]-a-p.options.closeButtonLinkOverscan)+"px",width:""+(p.options.closeButtonCrossSize+2*p.options.closeButtonLinkOverscan)+"px",height:""+(p.options.closeButtonCrossSize+2*p.options.closeButtonLinkOverscan)+"px"})}()}};b.prototype._getPathStemMeasures=function(a,c,d){var b;d/=2;a=Math.atan(a/
2/c);b=2*(d/Math.sin(2*a))*Math.cos(a);c=d+c-b;if(0>c)throw Error("Sorry but your stemLength / stemBase ratio is strange.");a=Math.tan(a)*c*2;return{stemLength:c,stemBase:a}};b.prototype._getColor=function(a,c,d,b){var g;null==b&&(b=!1);if("string"===typeof d)return d;a=b?a.createLinearGradient(0,0,c.width,0):a.createLinearGradient(0,0,0,c.height);g=c=0;for(b=d.length;c<b;g=++c)g=d[g],a.addColorStop(g[0],g[1]);return a};b.prototype._searchAndActivateCloseButtons=function(){var a,c,d,b;b=this.adapter.findAll(this.container,
"."+this["class"].close);c=0;for(d=b.length;c<d;c++)a=b[c],this.hideTriggers.push({element:this.adapter.wrap(a),event:"click"});this.currentObservers.showing&&this._setupObservers("-showing","showing");if(this.currentObservers.visible)return this._setupObservers("-visible","visible")};b.prototype._activateFirstInput=function(){var a;a=this.adapter.unwrap(this.adapter.find(this.container,"input, textarea"));return null!=a?"function"===typeof a.focus?a.focus():void 0:void 0};b.prototype._followMousePosition=
function(){if(!this.options.fixed)return b._observeMousePosition(this.bound.reposition)};b.prototype._stopFollowingMousePosition=function(){if(!this.options.fixed)return b._stopObservingMousePosition(this.bound.reposition)};b.prototype._clearShowTimeout=function(){return clearTimeout(this._showTimeoutId)};b.prototype._clearHideTimeout=function(){return clearTimeout(this._hideTimeoutId)};b.prototype._clearTimeouts=function(){clearTimeout(this._visibilityStateTimeoutId);this._clearShowTimeout();return this._clearHideTimeout()};
b.prototype._triggerElementExists=function(){var a;for(a=this.adapter.unwrap(this.triggerElement);a.parentNode;){if("BODY"===a.parentNode.tagName)return!0;a=a.parentNode}return!1};b.prototype._loadAjax=function(){function a(a){return g.adapter.ajax({url:g.options.ajax,method:g.options.ajaxMethod,onSuccess:function(a){c(a)},onError:function(a){var d;d=g.options.ajaxErrorMessage;g.debug(d,a);g.setContent(d);g.adapter.addClass(g.container,g["class"].ajaxError)},onComplete:function(){d()}})}function c(a){g.debug("Loading successful.");
g.adapter.removeClass(g.container,g["class"].loading);h&&(b.cache[h]=a);a=f(a);return g.setContent(a)}function d(){g.adapter.removeClass(g.container,g["class"].loading);g.loading=!1;g.loaded=!0;g._searchAndActivateCloseButtons();g._activateFirstInput();return g.reposition()}var f=this.options.ajaxCallback||function(a){return a},g=this;if(!this.loading){this.loaded=!1;this.loading=!0;this.adapter.addClass(this.container,this["class"].loading);this.setContent("");this.debug("Loading content from "+
this.options.ajax);var e,h=this.options.ajaxID;h?b.cache[h]?(e=b.cache[h],c(e),d()):e=a(h):e=a();return e}};b.prototype._ensureTriggerElement=function(){if(!this._triggerElementExists())return this.deactivate(),this._stopEnsureTriggerElement()};b.prototype._ensureTriggerElementInterval=1E3;b.prototype._startEnsureTriggerElement=function(){var a=this;return this._ensureTriggerElementTimeoutId=setInterval(function(){return a._ensureTriggerElement()},this._ensureTriggerElementInterval)};b.prototype._stopEnsureTriggerElement=
function(){return clearInterval(this._ensureTriggerElementTimeoutId)};return b}();vendors=["khtml","ms","o","moz","webkit"];Opentip.prototype.setCss3Style=function(b,a){var c,d,f,g,e;b=this.adapter.unwrap(b);e=[];for(c in a)__hasProp.call(a,c)&&(d=a[c],null!=b.style[c]?e.push(b.style[c]=d):e.push(function(){var a,e,l;l=[];a=0;for(e=vendors.length;a<e;a++)f=vendors[a],g=""+this.ucfirst(f)+this.ucfirst(c),null!=b.style[g]?l.push(b.style[g]=d):l.push(void 0);return l}.call(this)));return e};
Opentip.prototype.defer=function(b){return setTimeout(b,0)};Opentip.prototype.setTimeout=function(b,a){return setTimeout(b,a?1E3*a:0)};Opentip.prototype.ucfirst=function(b){return null==b?"":b.charAt(0).toUpperCase()+b.slice(1)};Opentip.prototype.dasherize=function(b){return b.replace(/([A-Z])/g,function(a,c){return"-"+c.toLowerCase()})};mousePositionObservers=[];mousePosition={x:0,y:0};
mouseMoved=function(b){var a,c,d;mousePosition=Opentip.adapter.mousePosition(b);d=[];a=0;for(c=mousePositionObservers.length;a<c;a++)b=mousePositionObservers[a],d.push(b());return d};Opentip.followMousePosition=function(){return Opentip.adapter.observe(document.body,"mousemove",mouseMoved)};Opentip._observeMousePosition=function(b){return mousePositionObservers.push(b)};
Opentip._stopObservingMousePosition=function(b){var a,c,d,f;f=[];c=0;for(d=mousePositionObservers.length;c<d;c++)a=mousePositionObservers[c],a!==b&&f.push(a);return mousePositionObservers=f};
Opentip.Joint=function(){function b(a){null!=a&&(a instanceof Opentip.Joint&&(a=a.toString()),this.set(a),this)}b.prototype.set=function(a){a=a.toLowerCase();this.setHorizontal(a);this.setVertical(a);return this};b.prototype.setHorizontal=function(a){var c,d,b,g;d=["left","center","right"];b=0;for(g=d.length;b<g;b++)c=d[b],~a.indexOf(c)&&(this.horizontal=c.toLowerCase());null==this.horizontal&&(this.horizontal="center");g=[];a=0;for(b=d.length;a<b;a++)c=d[a],g.push(this[c]=this.horizontal===c?c:void 0);
return g};b.prototype.setVertical=function(a){var c,d,b,g;d=["top","middle","bottom"];b=0;for(g=d.length;b<g;b++)c=d[b],~a.indexOf(c)&&(this.vertical=c.toLowerCase());null==this.vertical&&(this.vertical="middle");g=[];a=0;for(b=d.length;a<b;a++)c=d[a],g.push(this[c]=this.vertical===c?c:void 0);return g};b.prototype.eql=function(a){return null!=a&&this.horizontal===a.horizontal&&this.vertical===a.vertical};b.prototype.flip=function(){var a;a=Opentip.position[this.toString(!0)];this.set(Opentip.positions[(a+
4)%8]);return this};b.prototype.toString=function(a){var c,d;null==a&&(a=!1);d="middle"===this.vertical?"":this.vertical;c="center"===this.horizontal?"":this.horizontal;d&&c&&(c=a?Opentip.prototype.ucfirst(c):" "+c);return""+d+c};return b}();Opentip.prototype._positionsEqual=function(b,a){return null!=b&&null!=a&&b.left===a.left&&b.top===a.top};Opentip.prototype._dimensionsEqual=function(b,a){return null!=b&&null!=a&&b.width===a.width&&b.height===a.height};
Opentip.prototype.debug=function(){var b;b=1<=arguments.length?__slice.call(arguments,0):[];if(Opentip.debug&&null!=("undefined"!==typeof console&&null!==console?console.debug:void 0))return b.unshift("#"+this.id+" |"),console.debug.apply(console,b)};
Opentip.findElements=function(){var b,a,c,d,f,g,e,h,m,l;b=Opentip.adapter;m=b.findAll(document.body,"[data-ot]");l=[];e=0;for(h=m.length;e<h;e++){c=m[e];g={};a=b.data(c,"ot");if(""===a||"true"===a||"yes"===a)a=b.attr(c,"title"),b.attr(c,"title","");a=a||"";for(d in Opentip.styles.standard)if(f=b.data(c,"ot"+Opentip.prototype.ucfirst(d)),null!=f){if("yes"===f||"true"===f||"on"===f)f=!0;else if("no"===f||"false"===f||"off"===f)f=!1;g[d]=f}l.push(new Opentip(c,a,g))}return l};Opentip.version="2.4.6";
Opentip.debug=!1;Opentip.lastId=0;Opentip.lastZIndex=100;Opentip.tips=[];Opentip._abortShowingGroup=function(b,a){var c,d,f,g,e;g=Opentip.tips;e=[];d=0;for(f=g.length;d<f;d++)c=g[d],c!==a&&c.options.group===b?e.push(c._abortShowing()):e.push(void 0);return e};Opentip._hideGroup=function(b,a){var c,d,f,g,e;g=Opentip.tips;e=[];d=0;for(f=g.length;d<f;d++)c=g[d],c!==a&&c.options.group===b?e.push(c.hide()):e.push(void 0);return e};Opentip.adapters={};Opentip.adapter=null;firstAdapter=!0;
Opentip.addAdapter=function(b){Opentip.adapters[b.name]=b;if(firstAdapter)return Opentip.adapter=b,b.domReady(Opentip.findElements),b.domReady(Opentip.followMousePosition),firstAdapter=!1};Opentip.positions="top topRight right bottomRight bottom bottomLeft left topLeft".split(" ");Opentip.position={};_ref=Opentip.positions;i=_i=0;for(_len=_ref.length;_i<_len;i=++_i)position=_ref[i],Opentip.position[position]=i;
Opentip.styles={standard:{"extends":null,title:void 0,escapeTitle:!0,escapeContent:!1,className:"standard",stem:!0,delay:null,hideDelay:.1,fixed:!1,showOn:"mouseover",hideTrigger:"trigger",hideTriggers:[],hideOn:null,removeElementsOnHide:!1,offset:[0,0],containInViewport:!0,autoOffset:!0,showEffect:"appear",hideEffect:"fade",showEffectDuration:.3,hideEffectDuration:.2,stemLength:5,stemBase:8,tipJoint:"top left",target:null,targetJoint:null,cache:!0,ajax:!1,ajaxMethod:"GET",ajaxErrorMessage:"There was a problem downloading the content.",
group:null,style:null,background:"#fff18f",backgroundGradientHorizontal:!1,closeButtonOffset:[5,5],closeButtonRadius:7,closeButtonCrossSize:4,closeButtonCrossColor:"#d2c35b",closeButtonCrossLineWidth:1.5,closeButtonLinkOverscan:6,borderRadius:5,borderWidth:1,borderColor:"#f2e37b",shadow:!0,shadowBlur:10,shadowOffset:[3,3],shadowColor:"rgba(0, 0, 0, 0.1)"},glass:{"extends":"standard",className:"glass",background:[[0,"rgba(252, 252, 252, 0.8)"],[.5,"rgba(255, 255, 255, 0.8)"],[.5,"rgba(250, 250, 250, 0.9)"],
[1,"rgba(245, 245, 245, 0.9)"]],borderColor:"#eee",closeButtonCrossColor:"rgba(0, 0, 0, 0.2)",borderRadius:15,closeButtonRadius:10,closeButtonOffset:[8,8]},dark:{"extends":"standard",className:"dark",borderRadius:13,borderColor:"#444",closeButtonCrossColor:"rgba(240, 240, 240, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(30, 30, 30, 0.7)"],[.5,"rgba(30, 30, 30, 0.8)"],[.5,"rgba(10, 10, 10, 0.8)"],[1,"rgba(10, 10, 10, 0.9)"]]},alert:{"extends":"standard",className:"alert",
borderRadius:1,borderColor:"#AE0D11",closeButtonCrossColor:"rgba(255, 255, 255, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(203, 15, 19, 0.7)"],[.5,"rgba(203, 15, 19, 0.8)"],[.5,"rgba(189, 14, 18, 0.8)"],[1,"rgba(179, 14, 17, 0.9)"]]}};Opentip.defaultStyle="standard";"undefined"!==typeof module&&null!==module?module.exports=Opentip:window.Opentip=Opentip;__slice=[].slice;
(function(b){var a;b.fn.opentip=function(a,d,b){return new Opentip(this,a,d,b)};a=function(){function a(){}a.prototype.name="jquery";a.prototype.domReady=function(a){return b(a)};a.prototype.create=function(a){return b(a)};a.prototype.wrap=function(a){a=b(a);if(1<a.length)throw Error("Multiple elements provided.");return a};a.prototype.unwrap=function(a){return b(a)[0]};a.prototype.tagName=function(a){return this.unwrap(a).tagName};a.prototype.attr=function(){var a,c,g;c=arguments[0];a=2<=arguments.length?
__slice.call(arguments,1):[];return(g=b(c)).attr.apply(g,a)};a.prototype.data=function(){var a,c,g;c=arguments[0];a=2<=arguments.length?__slice.call(arguments,1):[];return(g=b(c)).data.apply(g,a)};a.prototype.find=function(a,c){return b(a).find(c).get(0)};a.prototype.findAll=function(a,c){return b(a).find(c)};a.prototype.update=function(a,c,g){a=b(a);return g?a.text(c):a.html(c)};a.prototype.append=function(a,c){return b(a).append(c)};a.prototype.remove=function(a){return b(a).remove()};a.prototype.addClass=
function(a,c){return b(a).addClass(c)};a.prototype.removeClass=function(a,c){return b(a).removeClass(c)};a.prototype.css=function(a,c){return b(a).css(c)};a.prototype.dimensions=function(a){return{width:b(a).outerWidth(),height:b(a).outerHeight()}};a.prototype.scrollOffset=function(){return[window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop]};a.prototype.viewportDimensions=function(){return{width:document.documentElement.clientWidth,
height:document.documentElement.clientHeight}};a.prototype.mousePosition=function(a){return null==a?null:{x:a.pageX,y:a.pageY}};a.prototype.offset=function(a){a=b(a).offset();return{left:a.left,top:a.top}};a.prototype.observe=function(a,c,g){return b(a).bind(c,g)};a.prototype.stopObserving=function(a,c,g){return b(a).unbind(c,g)};a.prototype.ajax=function(a){var c,g;if(null==a.url)throw Error("No url provided");return b.ajax({url:a.url,type:null!=(c=null!=(g=a.method)?g.toUpperCase():void 0)?c:"GET"}).done(function(b){return"function"===
typeof a.onSuccess?a.onSuccess(b):void 0}).fail(function(b){return"function"===typeof a.onError?a.onError("Server responded with status "+b.status):void 0}).always(function(){return"function"===typeof a.onComplete?a.onComplete():void 0})};a.prototype.clone=function(a){return b.extend({},a)};a.prototype.extend=function(){var a,c;c=arguments[0];a=2<=arguments.length?__slice.call(arguments,1):[];return b.extend.apply(b,[c].concat(__slice.call(a)))};return a}();return Opentip.addAdapter(new a)})(jQuery);
