var storage={},me={};function preinit(){$.get(chrome.extension.getURL("content.html"),function(t){$("body").append(t),crapi.clone(function(t){var o,e,n,i,a,s,d;(storage=t).options.userTags&&function(){var o=storage.options.userTagLinks,t=$(".new_comment #comment_content");if(t.length){var e=$(".main div.comments"),n=e.find(".comment .content > h4").map(function(){return o?$(this).html():$(this).text()}).get().unique(),i=[];$.each(n,function(t,e){i.push({val:e})}),t.sew({values:i,elementFactory:function(t,e){t.html(o?$(e.val).text():e.val)}})}}(),storage.options.moveCommentBox&&function(){var t=$(".write-comment");if(t.length){var e=t.prevAll("h3").first(),o=t.siblings("div.comments");t.addClass("mod-write-comment"),o.addClass("mod-comments"),e.after(t)}}(),storage.options.groupFilters&&(o=$(".main .group-list"),e=_factory(".modation-factory",".modation-group-filter"),n=e.find(".filter"),o.addClass("mod-group-list"),o.before(e),o.isotope({itemSelector:".group",layoutMode:"vertical",transitionDuration:".3s"}),o.imagesLoaded().progress(function(){o.isotope("layout")}),handle(n,"input.initGroups",function(){var t=$(this),e=t.val(),n=e.toLowerCase();o.isotope({filter:function(){var t=$(this),e=t.find(".name"),o=e.text().toLowerCase();return-1!=o.indexOf(n)}})})),storage.options.moveGroupInvites&&(i=$(".main .group-list"),a=$(".main .invitations"),s=a.prev("h3"),a.addClass("mod-group-invites"),i.before(a),a.before(s)),storage.options.showAlertsOnTop&&$(".alert").addClass("mod-alert"),storage.options.watchlist&&(d=global.path.home+location.pathname,chrome.runtime.sendMessage({action:"watchlistItemType",link:d},function(t){var i=t;if(i){var a,s,r={watchlist:storage.watchlist},e=r.watchlist,c=e.findIndex(function(t){return t.link==d}),o=$("aside > section").first(),n=_factory(".modation-factory",".modation-watchlist-actions"),l=n.children(".add"),m=n.children(".remove");o.before(n),function o(){var t=~c;if(t){s=l;var e=(a=m).find(".unwatch");handle(e,"click.initWatchlist",function(t){t.preventDefault();var e=r.watchlist.splice(c,1);crapi.updateAll(r,function(t){t?(global.debug&&console.log("item unwatched! %o",e),c=-1,o()):console.error("Item not unwatched due to storage lock! Please try again in a few seconds.")})})}else{s=m;var n=(a=l).find(".watch");handle(n,"click.initWatchlist",function(t){t.preventDefault(),chrome.runtime.sendMessage({action:"parseWatchlistItem",link:d,html:document.documentElement.innerHTML,type:i},function(t){var e=r.watchlist.push(t.updates)-1;crapi.updateAll(r,function(t){t?(global.debug&&console.log("item watched! %o",r),c=e,o()):console.error("Item not watched due to storage lock! Please try again in a few seconds.")})})})}showView(s,a,0)}()}})),modapi.login(function(t){me=t})})})}preinit();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnQuanMiXSwibmFtZXMiOlsic3RvcmFnZSIsIm1lIiwicHJlaW5pdCIsIiQiLCJnZXQiLCJjaHJvbWUiLCJleHRlbnNpb24iLCJnZXRVUkwiLCJkIiwiYXBwZW5kIiwiY3JhcGkiLCJjbG9uZSIsIiRncm91cExpc3QiLCIkZ3JvdXBGaWx0ZXIiLCIkZmlsdGVyIiwiJGludml0YXRpb25zIiwiJGhlYWRlciIsImxpbmsiLCJvcHRpb25zIiwidXNlclRhZ3MiLCJ1c2VyVGFnTGlua3MiLCIkbmV3Q29tbWVudCIsImxlbmd0aCIsIiRjb21tZW50cyIsIm5hbWVzIiwiZmluZCIsIm1hcCIsInRoaXMiLCJodG1sIiwidGV4dCIsInVuaXF1ZSIsIm5hbWVzUGFyc2VkIiwiZWFjaCIsImkiLCJ2IiwicHVzaCIsInZhbCIsInNldyIsInZhbHVlcyIsImVsZW1lbnRGYWN0b3J5IiwiJGVsIiwiZSIsImluaXRUYWdzIiwibW92ZUNvbW1lbnRCb3giLCIkd3JpdGVDb21tZW50IiwicHJldkFsbCIsImZpcnN0Iiwic2libGluZ3MiLCJhZGRDbGFzcyIsImFmdGVyIiwiaW5pdENvbW1lbnRzIiwiZ3JvdXBGaWx0ZXJzIiwiX2ZhY3RvcnkiLCJiZWZvcmUiLCJpc290b3BlIiwiaXRlbVNlbGVjdG9yIiwibGF5b3V0TW9kZSIsInRyYW5zaXRpb25EdXJhdGlvbiIsImltYWdlc0xvYWRlZCIsInByb2dyZXNzIiwiaGFuZGxlIiwiJHRoaXMiLCJzZWFyY2giLCJ0b0xvd2VyQ2FzZSIsImZpbHRlciIsIiRuYW1lIiwiaW5kZXhPZiIsIm1vdmVHcm91cEludml0ZXMiLCJwcmV2Iiwic2hvd0FsZXJ0c09uVG9wIiwid2F0Y2hsaXN0IiwiZ2xvYmFsIiwicGF0aCIsImhvbWUiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwicnVudGltZSIsInNlbmRNZXNzYWdlIiwiYWN0aW9uIiwicmVzdWx0IiwidHlwZSIsIiR0YXJnZXQiLCIkY29udGV4dCIsIndhdGNoZWRJbmRleCIsImZpbmRJbmRleCIsIiRmaXJzdFNlY3Rpb24iLCIkYWN0aW9ucyIsIiRhZGRDb250YWluZXIiLCJjaGlsZHJlbiIsIiRyZW1vdmVDb250YWluZXIiLCJfdXBkYXRlVmlldyIsIndhdGNoZWQiLCIkdW53YXRjaCIsInByZXZlbnREZWZhdWx0IiwiZGVsZXRlZCIsInNwbGljZSIsInVwZGF0ZUFsbCIsInN1Y2Nlc3MiLCJkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIiR3YXRjaCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiaW5uZXJIVE1MIiwibmV3SW5kZXgiLCJ1cGRhdGVzIiwic2hvd1ZpZXciLCJtb2RhcGkiLCJsb2dpbiIsIm1pIl0sIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxRQUFVLEdBR1ZDLEdBQUssR0FXVCxTQUFTQyxVQUNSQyxFQUFFQyxJQUFJQyxPQUFPQyxVQUFVQyxPQUFPLGdCQUFpQixTQUFTQyxHQUN2REwsRUFBRSxRQUFRTSxPQUFPRCxHQUVqQkUsTUFBTUMsTUFBTSxTQUFTSCxHQXFFdEIsSUFDS0ksRUFDQUMsRUFDQUMsRUF5Q0FGLEVBQ0FHLEVBQ0FDLEVBb0JBQyxHQXJJSGpCLFFBQVVRLEdBR0VVLFFBQVFDLFVBZXRCLFdBQ0MsSUFBSUMsRUFBZXBCLFFBQVFrQixRQUFRRSxhQUUvQkMsRUFBY2xCLEVBQUUsaUNBR3BCLEdBQUlrQixFQUFZQyxPQUFRLENBQ3ZCLElBQUlDLEVBQVlwQixFQUFFLHNCQUdkcUIsRUFBUUQsRUFBVUUsS0FBSywwQkFBMEJDLElBQUksV0FDeEQsT0FBTyxFQUFpQnZCLEVBQUV3QixNQUFNQyxPQUFTekIsRUFBRXdCLE1BQU1FLFNBQy9DekIsTUFBTTBCLFNBR0xDLEVBQWMsR0FDbEI1QixFQUFFNkIsS0FBS1IsRUFBTyxTQUFTUyxFQUFHQyxHQUN6QkgsRUFBWUksS0FBSyxDQUFDQyxJQUFLRixNQUl4QmIsRUFBWWdCLElBQUksQ0FDZkMsT0FBUVAsRUFDUlEsZUFBZ0IsU0FBU0MsRUFBS0MsR0FDN0JELEVBQUlaLEtBQUtSLEVB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S0FBTUEsRUFBTVcsS0FBTTJFLFNBQVNDLGdCQUFnQkMsVUFBV3pCLEtBQU1BLEdBQU8sU0FBU0QsR0FFckksSUFBSTJCLEVBQVdsRyxFQUFFOEQsVUFBVW5DLEtBQUs0QyxFQUFPNEIsU0FBVyxFQUVsRGpHLE1BQU1zRixVQUFVeEYsRUFBRyxTQUFTeUYsR0FDdkJBLEdBQ0MxQixPQUFPMkIsT0FBT0MsUUFBUUMsSUFBSSxtQkFBb0I1RixHQUdsRDJFLEVBQWV1QixFQUdmaEIsS0FJQVMsUUFBUUUsTUFBTSxrRkFxQ25CTyxTQUFTMUIsRUFBVUQsRUFBUyxHQXpFN0IsT0F6S0Y0QixPQUFPQyxNQUFNLFNBQVNDLEdBRXJCOUcsR0FBSzhHLFFBMUJUN0ciLCJmaWxlIjoiY29udGVudC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1N0b3JhZ2UgZm9yIGNsb25lZCB1c2VyIHNldHRpbmdzXHJcbnZhciBzdG9yYWdlID0ge307XHJcblxyXG4vL1N0b3JhZ2UgZm9yIGxvZ2luIGluZm9ybWF0aW9uXHJcbnZhciBtZSA9IHt9O1xyXG5cclxuLy9Jbml0aWFsaXplIHN0dWZmIHdpdGhvdXQgZXh0cmEgY29uZmlndXJhdGlvblxyXG5wcmVpbml0KCk7XHJcblxyXG4vL1dyYXBwZXJcclxuLyokKGZ1bmN0aW9uKCkge1xyXG5cdC8vTnV0aW4uXHJcbn0pOyovXHJcblxyXG4vL0luaXRpYWxpemF0aW9uIHRoYXQgaXMgaW5kZXBlbmRlbnQgb2YgdXNlciBzZXR0aW5nc1xyXG5mdW5jdGlvbiBwcmVpbml0KCkge1xyXG5cdCQuZ2V0KGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKFwiY29udGVudC5odG1sXCIpLCBmdW5jdGlvbihkKSB7XHJcblx0XHQkKFwiYm9keVwiKS5hcHBlbmQoZCk7XHJcblx0XHRcclxuXHRcdGNyYXBpLmNsb25lKGZ1bmN0aW9uKGQpIHtcclxuXHRcdFx0Ly9DYWNoZSBzdG9yYWdlXHJcblx0XHRcdHN0b3JhZ2UgPSBkO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly9Jbml0aWFsaXplIGFsbCB0aGUgdGhpbmdzXHJcblx0XHRcdGlmIChzdG9yYWdlLm9wdGlvbnMudXNlclRhZ3MpIGluaXRUYWdzKCk7XHJcblx0XHRcdGlmIChzdG9yYWdlLm9wdGlvbnMubW92ZUNvbW1lbnRCb3gpIGluaXRDb21tZW50cygpO1xyXG5cdFx0XHRpZiAoc3RvcmFnZS5vcHRpb25zLmdyb3VwRmlsdGVycykgaW5pdEdyb3VwcygpO1xyXG5cdFx0XHRpZiAoc3RvcmFnZS5vcHRpb25zLm1vdmVHcm91cEludml0ZXMpIGluaXRHcm91cEludml0ZXMoKTtcclxuXHRcdFx0aWYgKHN0b3JhZ2Uub3B0aW9ucy5zaG93QWxlcnRzT25Ub3ApIGluaXRBbGVydHMoKTtcclxuXHRcdFx0aWYgKHN0b3JhZ2Uub3B0aW9ucy53YXRjaGxpc3QpIGluaXRXYXRjaGxpc3QoKTtcclxuXHRcdFx0XHJcblx0XHRcdG1vZGFwaS5sb2dpbihmdW5jdGlvbihtaSkge1xyXG5cdFx0XHRcdC8vQ2FjaGUgdXNlclxyXG5cdFx0XHRcdG1lID0gbWk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdC8vSW5pdGlhbGl6ZSB1c2VyIHRhZ2dpbmdcclxuXHRmdW5jdGlvbiBpbml0VGFncygpIHtcclxuXHRcdHZhciB1c2VyVGFnTGlua3MgPSBzdG9yYWdlLm9wdGlvbnMudXNlclRhZ0xpbmtzO1xyXG5cdFx0XHJcblx0XHR2YXIgJG5ld0NvbW1lbnQgPSAkKFwiLm5ld19jb21tZW50ICNjb21tZW50X2NvbnRlbnRcIik7XHJcblx0XHRcclxuXHRcdC8vQ29tbWVudCBib3ggZXhpc3RzXHJcblx0XHRpZiAoJG5ld0NvbW1lbnQubGVuZ3RoKSB7XHJcblx0XHRcdHZhciAkY29tbWVudHMgPSAkKFwiLm1haW4gZGl2LmNvbW1lbnRzXCIpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly9TdG9yYWdlIGZvciB1bmlxdWUgbmFtZXMgb24gcGFnZVxyXG5cdFx0XHR2YXIgbmFtZXMgPSAkY29tbWVudHMuZmluZChcIi5jb21tZW50IC5jb250ZW50ID4gaDRcIikubWFwKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAodXNlclRhZ0xpbmtzKSA/ICQodGhpcykuaHRtbCgpIDogJCh0aGlzKS50ZXh0KCk7XHJcblx0XHRcdH0pLmdldCgpLnVuaXF1ZSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly9TdG9yYWdlIGZvciBwYXJzZWQgbmFtZXNcclxuXHRcdFx0dmFyIG5hbWVzUGFyc2VkID0gW107XHJcblx0XHRcdCQuZWFjaChuYW1lcywgZnVuY3Rpb24oaSwgdikge1xyXG5cdFx0XHRcdG5hbWVzUGFyc2VkLnB1c2goe3ZhbDogdn0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vSW5pdGlhbGl6ZSBpbmxpbmUgc2VsZWN0XHJcblx0XHRcdCRuZXdDb21tZW50LnNldyh7XHJcblx0XHRcdFx0dmFsdWVzOiBuYW1lc1BhcnNlZCxcclxuXHRcdFx0XHRlbGVtZW50RmFjdG9yeTogZnVuY3Rpb24oJGVsLCBlKSB7XHJcblx0XHRcdFx0XHQkZWwuaHRtbCh1c2VyVGFnTGlua3MgPyAkKGUudmFsKS50ZXh0KCkgOiBlLnZhbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly9Jbml0aWFsaXplIGNvbW1lbnRzXHJcblx0ZnVuY3Rpb24gaW5pdENvbW1lbnRzKCkge1xyXG5cdFx0dmFyICR3cml0ZUNvbW1lbnQgPSAkKFwiLndyaXRlLWNvbW1lbnRcIik7XHJcblx0XHRcclxuXHRcdC8vQ29tbWVudCBib3ggZXhpc3RzXHJcblx0XHRpZiAoJHdyaXRlQ29tbWVudC5sZW5ndGgpIHtcclxuXHRcdFx0dmFyICRoZWFkZXIgPSAkd3JpdGVDb21tZW50LnByZXZBbGwoXCJoM1wiKS5maXJzdCgpO1xyXG5cdFx0XHR2YXIgJGNvbW1lbnRzID0gJHdyaXRlQ29tbWVudC5zaWJsaW5ncyhcImRpdi5jb21tZW50c1wiKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vU2V0IHVwIGNvbW1lbnRzXHJcblx0XHRcdCR3cml0ZUNvbW1lbnQuYWRkQ2xhc3MoXCJtb2Qtd3JpdGUtY29tbWVudFwiKTtcclxuXHRcdFx0JGNvbW1lbnRzLmFkZENsYXNzKFwibW9kLWNvbW1lbnRzXCIpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly9Nb3ZlIGNvbW1lbnQgYm94IHRvIHRvcCBvZiB0aHJlYWRcclxuXHRcdFx0JGhlYWRlci5hZnRlcigkd3JpdGVDb21tZW50KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly9Jbml0aWFsaXplIGdyb3VwIGxpc3RcclxuXHRmdW5jdGlvbiBpbml0R3JvdXBzKCkge1xyXG5cdFx0dmFyICRncm91cExpc3QgPSAkKFwiLm1haW4gLmdyb3VwLWxpc3RcIik7XHJcblx0XHR2YXIgJGdyb3VwRmlsdGVyID0gX2ZhY3RvcnkoXCIubW9kYXRpb24tZmFjdG9yeVwiLCBcIi5tb2RhdGlvbi1ncm91cC1maWx0ZXJcIik7XHJcblx0XHR2YXIgJGZpbHRlciA9ICRncm91cEZpbHRlci5maW5kKFwiLmZpbHRlclwiKTtcclxuXHRcdFxyXG5cdFx0Ly9TZXQgdXAgZ3JvdXAgbGlzdFxyXG5cdFx0JGdyb3VwTGlzdC5hZGRDbGFzcyhcIm1vZC1ncm91cC1saXN0XCIpO1xyXG5cdFx0XHJcblx0XHQvL0FkZCBncm91cCBmaWx0ZXIgYmVmb3JlIGxpc3RcclxuXHRcdCRncm91cExpc3QuYmVmb3JlKCRncm91cEZpbHRlcik7XHJcblx0XHRcclxuXHRcdC8vSW5pdGlhbGl6ZSBJc290b3BlXHJcblx0XHQkZ3JvdXBMaXN0Lmlzb3RvcGUoe1xyXG5cdFx0XHRpdGVtU2VsZWN0b3I6IFwiLmdyb3VwXCIsXHJcblx0XHRcdGxheW91dE1vZGU6IFwidmVydGljYWxcIixcclxuXHRcdFx0dHJhbnNpdGlvbkR1cmF0aW9uOiBcIi4zc1wiXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly9UcmlnZ2VyIGxheW91dCBhZnRlciBlYWNoIGltYWdlIGxvYWRzXHJcblx0XHQkZ3JvdXBMaXN0LmltYWdlc0xvYWRlZCgpLnByb2dyZXNzKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkZ3JvdXBMaXN0Lmlzb3RvcGUoXCJsYXlvdXRcIik7XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly9TZXQgdXAgc2VhcmNoXHJcblx0XHRoYW5kbGUoJGZpbHRlciwgXCJpbnB1dC5pbml0R3JvdXBzXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cdFx0XHR2YXIgdmFsID0gJHRoaXMudmFsKCk7XHJcblx0XHRcdHZhciBzZWFyY2ggPSB2YWwudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vRmlsdGVyIGdyb3VwIGxpc3RcclxuXHRcdFx0JGdyb3VwTGlzdC5pc290b3BlKHtcclxuXHRcdFx0XHRmaWx0ZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHRcdFx0XHRcdHZhciAkbmFtZSA9ICR0aGlzLmZpbmQoXCIubmFtZVwiKTtcclxuXHRcdFx0XHRcdHZhciB0ZXh0ID0gJG5hbWUudGV4dCgpLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHJldHVybiAodGV4dC5pbmRleE9mKHNlYXJjaCkgIT0gLTEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0Ly8gSW5pdGlhbGl6ZSBncm91cCBpbnZpdGVzXHJcblx0ZnVuY3Rpb24gaW5pdEdyb3VwSW52aXRlcygpIHtcclxuXHRcdHZhciAkZ3JvdXBMaXN0ID0gJChcIi5tYWluIC5ncm91cC1saXN0XCIpO1xyXG5cdFx0dmFyICRpbnZpdGF0aW9ucyA9ICQoXCIubWFpbiAuaW52aXRhdGlvbnNcIik7XHJcblx0XHR2YXIgJGhlYWRlciA9ICRpbnZpdGF0aW9ucy5wcmV2KFwiaDNcIik7XHJcblx0XHRcclxuXHRcdC8vIFNldCB1cCBpbnZpdGF0aW9uc1xyXG5cdFx0JGludml0YXRpb25zLmFkZENsYXNzKFwibW9kLWdyb3VwLWludml0ZXNcIik7XHJcblx0XHRcclxuXHRcdC8vIE1vdmUgaW52aXRhdGlvbnMgYWJvdmUgZ3JvdXAgbGlzdFxyXG5cdFx0JGdyb3VwTGlzdC5iZWZvcmUoJGludml0YXRpb25zKTtcclxuXHRcdCRpbnZpdGF0aW9ucy5iZWZvcmUoJGhlYWRlcik7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEluaXRpYWxpemUgYWxlcnRcclxuXHRmdW5jdGlvbiBpbml0QWxlcnRzKCkge1xyXG5cdFx0dmFyICRhbGVydCA9ICQoXCIuYWxlcnRcIik7XHJcblx0XHRcclxuXHRcdC8vIFNldCB1cCBhbGVydFxyXG5cdFx0JGFsZXJ0LmFkZENsYXNzKFwibW9kLWFsZXJ0XCIpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBJbml0aWFsaXplIHdhdGNobGlzdCBidXR0b25zXHJcblx0ZnVuY3Rpb24gaW5pdFdhdGNobGlzdCgpIHtcclxuXHRcdHZhciBsaW5rID0gZ2xvYmFsLnBhdGguaG9tZSArIGxvY2F0aW9uLnBhdGhuYW1lO1xyXG5cdFx0XHJcblx0XHQvLyBSZXF1ZXN0IHdhdGNobGlzdCB0eXBlXHJcblx0XHRjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7YWN0aW9uOiBcIndhdGNobGlzdEl0ZW1UeXBlXCIsIGxpbms6IGxpbmt9LCBmdW5jdGlvbihyZXN1bHQpIHtcclxuXHRcdFx0dmFyIHR5cGUgPSByZXN1bHQ7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayB0byBtYWtlIHN1cmUgb25seSB3YXRjaGFibGUgcGFnZXMgYXJlIG1vZGlmaWVkXHJcblx0XHRcdGlmICh0eXBlKSB7XHJcblx0XHRcdFx0LyoqXHJcblx0XHRcdFx0ICogVGhlcmUgaXMgYSBwb3RlbnRpYWwgcHJvYmxlbSBsdXJraW5nIGluIGhlcmUgcmVnYXJkaW5nXHJcblx0XHRcdFx0ICogd2F0Y2hsaXN0IGFjdGlvbnMgb3V0c2lkZSBvZiB0aGUgY3VycmVudCB0YWIuIElmIGFuIGl0ZW1cclxuXHRcdFx0XHQgKiBpcyByZW1vdmVkIGZyb20gdGhlIHdhdGNobGlzdCBvdXRzaWRlIG9mIHRoZSBjdXJyZW50IHRhYixcclxuXHRcdFx0XHQgKiB0aGUgc3RvcmVkIHdhdGNobGlzdCBpbiB0aGUgY3VycmVudCB0YWIgaXMgb3V0IG9mIHN5bmMsIGFuZFxyXG5cdFx0XHRcdCAqIGFkZGluZy9yZW1vdmluZyBhbiBpdGVtIGNvdWxkIGFkZCBiYWNrIHRoZSBwcmV2aW91c2x5IHJlbW92ZWRcclxuXHRcdFx0XHQgKiBpdGVtIGFuZC9vciBkZWxldGUgc29tZSBvdGhlciBpdGVtLiBBIHNvbHV0aW9uIHRvIHRoaXMgd291bGRcclxuXHRcdFx0XHQgKiBiZSB0byBjbG9uZSB0aGUgc3RvcmFnZSBiZWZvcmUgZXZlcnkgYWN0aW9uLCBidXQgSSdsbCBsZWF2ZVxyXG5cdFx0XHRcdCAqIHRoYXQgZm9yIGEgZnV0dXJlIHVwZGF0ZS4gVGhpcyBpcyB0aGUgYmV0YSwgYWZ0ZXIgYWxsIVxyXG5cdFx0XHRcdCAqXHJcblx0XHRcdFx0ICogSSBzaW1wbGlmaWVkIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgd2F0Y2hsaXN0IGdyYWIgZHVlIHRvXHJcblx0XHRcdFx0ICogdGhlIGFib3ZlIHN0YXRlbWVudHMsIGFzIHRoZSBzdG9yYWdlIGlzIGFscmVhZHkgZ3JhYmJlZCB3aGVuXHJcblx0XHRcdFx0ICogdGhlIHBhZ2UgaXMgbG9hZGVkLlxyXG5cdFx0XHRcdCAqL1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEdyYWIgY3VycmVudCB3YXRjaGxpc3RcclxuXHRcdFx0XHQvL2NyYXBpLmNsb25lKFtcIndhdGNobGlzdFwiXSwgZnVuY3Rpb24oZCkge1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciBkID0ge3dhdGNobGlzdDogc3RvcmFnZS53YXRjaGxpc3R9O1xyXG5cdFx0XHRcdFx0dmFyIHdhdGNobGlzdCA9IGQud2F0Y2hsaXN0O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBEZXRlcm1pbmUgaWYgaXRlbSBpcyB3YXRjaGVkXHJcblx0XHRcdFx0XHR2YXIgd2F0Y2hlZEluZGV4ID0gd2F0Y2hsaXN0LmZpbmRJbmRleChmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBlLmxpbmsgPT0gbGluaztcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgJGZpcnN0U2VjdGlvbiA9ICQoXCJhc2lkZSA+IHNlY3Rpb25cIikuZmlyc3QoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU2V0IHVwIGFjdGlvbnMgc2VjdGlvblxyXG5cdFx0XHRcdFx0dmFyICRhY3Rpb25zID0gX2ZhY3RvcnkoXCIubW9kYXRpb24tZmFjdG9yeVwiLCBcIi5tb2RhdGlvbi13YXRjaGxpc3QtYWN0aW9uc1wiKTtcclxuXHRcdFx0XHRcdHZhciAkYWRkQ29udGFpbmVyID0gJGFjdGlvbnMuY2hpbGRyZW4oXCIuYWRkXCIpO1xyXG5cdFx0XHRcdFx0dmFyICRyZW1vdmVDb250YWluZXIgPSAkYWN0aW9ucy5jaGlsZHJlbihcIi5yZW1vdmVcIik7XHJcblx0XHRcdFx0XHR2YXIgJHRhcmdldCwgJGNvbnRleHQ7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFkZCBhY3Rpb25zIHNlY3Rpb24gYmVmb3JlIGZpcnN0IHNlY3Rpb24gKGFkbWluL2FydGlzdClcclxuXHRcdFx0XHRcdCRmaXJzdFNlY3Rpb24uYmVmb3JlKCRhY3Rpb25zKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSGVscGVyIGZ1bmN0aW9uIHRvIHVwZGF0ZSB2aWV3XHJcblx0XHRcdFx0XHQoZnVuY3Rpb24gX3VwZGF0ZVZpZXcoKSB7XHJcblx0XHRcdFx0XHRcdC8vIFVzZSB+IHRyaWNrIHRvIGNvbnZlcnQgaW5kZXggcmVzdWx0IGludG8gY29lcmNlZCBib29sZWFuXHJcblx0XHRcdFx0XHRcdC8vIChzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTIyOTk2NzgpXHJcblx0XHRcdFx0XHRcdHZhciB3YXRjaGVkID0gfndhdGNoZWRJbmRleDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8qKlxyXG5cdFx0XHRcdFx0XHQgKiBUaGVzZSB0d28gYmxvY2tzIGFyZSB2ZXJ5IHNpbWlsYXIuIEl0IHdvdWxkIGJlIGdyZWF0XHJcblx0XHRcdFx0XHRcdCAqIHRvIGZpbmQgc29tZSB3YXkgdG8gYWJzdHJhY3QgdGhlbSB0b2dldGhlci5cclxuXHRcdFx0XHRcdFx0ICovXHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBJdGVtIG5vdCBvbiB3YXRjaGxpc3RcclxuXHRcdFx0XHRcdFx0aWYgKCF3YXRjaGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0JHRhcmdldCA9ICRhZGRDb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0JGNvbnRleHQgPSAkcmVtb3ZlQ29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHZhciAkd2F0Y2ggPSAkYWRkQ29udGFpbmVyLmZpbmQoXCIud2F0Y2hcIik7XHJcblx0XHRcdFx0XHRcdFx0aGFuZGxlKCR3YXRjaCwgXCJjbGljay5pbml0V2F0Y2hsaXN0XCIsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVxdWVzdCB3YXRjaGxpc3QgbWV0YWRhdGFcclxuXHRcdFx0XHRcdFx0XHRcdGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHthY3Rpb246IFwicGFyc2VXYXRjaGxpc3RJdGVtXCIsIGxpbms6IGxpbmssIGh0bWw6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5pbm5lckhUTUwsIHR5cGU6IHR5cGV9LCBmdW5jdGlvbihyZXN1bHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGl0ZW0gdG8gd2F0Y2hsaXN0XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBuZXdJbmRleCA9IGQud2F0Y2hsaXN0LnB1c2gocmVzdWx0LnVwZGF0ZXMpIC0gMTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNyYXBpLnVwZGF0ZUFsbChkLCBmdW5jdGlvbihzdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChnbG9iYWwuZGVidWcpIGNvbnNvbGUubG9nKFwiaXRlbSB3YXRjaGVkISAlb1wiLCBkKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHdhdGNoZWQgaW5kZXhcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHdhdGNoZWRJbmRleCA9IG5ld0luZGV4O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIHZpZXcgdXBkYXRlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRfdXBkYXRlVmlldygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJJdGVtIG5vdCB3YXRjaGVkIGR1ZSB0byBzdG9yYWdlIGxvY2shIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBmZXcgc2Vjb25kcy5cIik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBJdGVtIG9uIHdhdGNobGlzdFxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHQkdGFyZ2V0ID0gJHJlbW92ZUNvbnRhaW5lcjtcclxuXHRcdFx0XHRcdFx0XHQkY29udGV4dCA9ICRhZGRDb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dmFyICR1bndhdGNoID0gJHJlbW92ZUNvbnRhaW5lci5maW5kKFwiLnVud2F0Y2hcIik7XHJcblx0XHRcdFx0XHRcdFx0aGFuZGxlKCR1bndhdGNoLCBcImNsaWNrLmluaXRXYXRjaGxpc3RcIiwgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgaXRlbSBmcm9tIHdhdGNobGlzdFxyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGRlbGV0ZWQgPSBkLndhdGNobGlzdC5zcGxpY2Uod2F0Y2hlZEluZGV4LCAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Y3JhcGkudXBkYXRlQWxsKGQsIGZ1bmN0aW9uKHN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZ2xvYmFsLmRlYnVnKSBjb25zb2xlLmxvZyhcIml0ZW0gdW53YXRjaGVkISAlb1wiLCBkZWxldGVkKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgd2F0Y2hlZCBpbmRleFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHdhdGNoZWRJbmRleCA9IC0xO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRyaWdnZXIgdmlldyB1cGRhdGVcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRfdXBkYXRlVmlldygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiSXRlbSBub3QgdW53YXRjaGVkIGR1ZSB0byBzdG9yYWdlIGxvY2shIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBmZXcgc2Vjb25kcy5cIik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzaG93VmlldygkY29udGV4dCwgJHRhcmdldCwgMCk7XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL30pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0Ly9Qcm9maWxlIHRpcHNcclxuXHQvKk9wZW50aXAuc3R5bGVzLnByb2ZpbGVUaXAgPSB7XHJcblx0XHQvL1RhcmdldGluZ1xyXG5cdFx0dGFyZ2V0OiB0cnVlLFxyXG5cdFx0dGlwSm9pbnQ6IFwibGVmdFwiLFxyXG5cdFx0XHJcblx0XHQvL0FuaW1hdGlvblxyXG5cdFx0aGlkZURlbGF5OiAuNSxcclxuXHRcdFxyXG5cdFx0Ly9TdHlsZXNcclxuXHRcdGJhY2tncm91bmQ6IFwiI2VlZVwiLFxyXG5cdFx0Ym9yZGVyUmFkaXVzOiAzLFxyXG5cdFx0Ym9yZGVyQ29sb3I6IFwiI2RkZFwiLFxyXG5cdFx0XHJcblx0XHQvL0FqYXhcclxuXHRcdGFqYXhDYWxsYmFjazogZnVuY3Rpb24oaHRtbCkge1xyXG5cdFx0XHR2YXIgJGh0bWwgPSAkKGh0bWwpO1xyXG5cdFx0XHR2YXIgJHVzZXJJbmZvID0gJGh0bWwuZmluZChcIiN1c2VyLWluZm9cIik7XHJcblx0XHRcdFxyXG5cdFx0XHQvL0VsZW1lbnQgY2xlYW51cFxyXG5cdFx0XHQkdXNlckluZm8uZmluZChcIi5yZXBvcnQtdXNlclwiKS5yZW1vdmUoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vU2V0IGNvbnRhaW5lciBzdHlsZXNcclxuXHRcdFx0JHVzZXJJbmZvLmNzcyh7XHJcblx0XHRcdFx0d2lkdGg6IFwiMzUwcHhcIixcclxuXHRcdFx0XHRtYXJnaW46IDAsXHJcblx0XHRcdFx0Ym9yZGVyOiBcIm5vbmVcIlxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vR3JhYiBIVE1MIGZvciB0aXBcclxuXHRcdFx0dmFyIHVzZXJJbmZvID0gJHVzZXJJbmZvWzBdLm91dGVySFRNTDtcclxuXHRcdFx0XHJcblx0XHRcdC8vUmV0dXJuIGZvcm1hdHRlZCBkYXRhIHRvIHRpcFxyXG5cdFx0XHRyZXR1cm4gdXNlckluZm87XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vR3JvdXAgdGlwc1xyXG5cdE9wZW50aXAuc3R5bGVzLmdyb3VwVGlwID0ge1xyXG5cdFx0Ly9UYXJnZXRpbmdcclxuXHRcdHRhcmdldDogdHJ1ZSxcclxuXHRcdHRpcEpvaW50OiBcImxlZnRcIixcclxuXHRcdFxyXG5cdFx0Ly9BbmltYXRpb25cclxuXHRcdGhpZGVEZWxheTogLjUsXHJcblx0XHRcclxuXHRcdC8vU3R5bGVzXHJcblx0XHRiYWNrZ3JvdW5kOiBcIiNlZWVcIixcclxuXHRcdGJvcmRlclJhZGl1czogMyxcclxuXHRcdGJvcmRlckNvbG9yOiBcIiNkZGRcIixcclxuXHRcdFxyXG5cdFx0Ly9BamF4XHJcblx0XHRhamF4Q2FsbGJhY2s6IGZ1bmN0aW9uKGh0bWwpIHtcclxuXHRcdFx0dmFyICRodG1sID0gJChodG1sKTtcclxuXHRcdFx0dmFyICRncm91cEluZm8gPSAkaHRtbC5maW5kKFwiI2dyb3VwLWluZm9cIik7XHJcblx0XHRcdHZhciBjb250ZW50ID0gXCJcIjtcclxuXHRcdFx0XHJcblx0XHRcdC8vUGFyc2UgZ3JvdXAgaW5mb1xyXG5cdFx0XHRpZiAoJGdyb3VwSW5mby5sZW5ndGgpIHtcclxuXHRcdFx0XHQvL0VsZW1lbnQgY2xlYW51cFxyXG5cdFx0XHRcdCRncm91cEluZm8uZmluZChcIi5qb2luXCIpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vU2V0IGNvbnRhaW5lciBzdHlsZXNcclxuXHRcdFx0XHQkZ3JvdXBJbmZvLmNzcyh7XHJcblx0XHRcdFx0XHR3aWR0aDogXCIzNTBweFwiLFxyXG5cdFx0XHRcdFx0bWFyZ2luOiAwLFxyXG5cdFx0XHRcdFx0Ym9yZGVyOiBcIm5vbmVcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnRlbnQgPSAkZ3JvdXBJbmZvWzBdLm91dGVySFRNTDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly9VbmFibGUgdG8gZ3JhYiBpbmZvXHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHZhciAkbWFpbiA9ICRodG1sLmZpbmQoXCIjbWFpblwiKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvL0NhdGNoZXMgdW5rbm93biBlcnJvcnNcclxuXHRcdFx0XHRjb250ZW50ID0gXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIVwiO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vQ2F0Y2hlcyBwcml2YXRlIGdyb3Vwc1xyXG5cdFx0XHRcdGlmICgkbWFpbi5maW5kKFwiLmVtcHR5XCIpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJwcml2YXRlXCIpICE9IFwiLTFcIikge1xyXG5cdFx0XHRcdFx0Y29udGVudCA9ICRtYWluLmZpbmQoXCIuZW1wdHlcIilbMF0ub3V0ZXJIVE1MO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly9SZXR1cm4gZm9ybWF0dGVkIGRhdGEgdG8gdGlwXHJcblx0XHRcdHJldHVybiBjb250ZW50O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvL0FkanVzdCBPcGVudGlwcyB6LWluZGV4XHJcblx0T3BlbnRpcC5sYXN0WkluZGV4ID0gNjc2OyovXHJcbn1cclxuXHJcbi8vSW1wcm92ZWQgaW5pdGlhbGl6YXRpb25cclxuLypmdW5jdGlvbiBpbml0KCkge1xyXG5cdC8vUHJvZmlsZSBUaXBzXHJcblx0LyppZiAoc3RvcmFnZVttZS5lbWFpbF1bXCJwcm9maWxlX3RpcHNcIl0pIHtcclxuXHRcdC8vQWRkIHByb2ZpbGUgaG92ZXIgdGlwc1xyXG5cdFx0JCgnYVtocmVmKj1cIi91c2VyL1wiXScpLm5vdCgnW2hyZWYqPVwiL3RyYWNrL1wiXSwgW2hyZWYqPXlvdXR1YmVdJykuZWFjaChmdW5jdGlvbihpLCBlKSB7XHJcblx0XHRcdC8vSWYgYW4gaW1hZ2UgaXMgaW5zaWRlIHRoZSBsaW5rLCB0b29sdGlwIHRoZSBpbWFnZVxyXG5cdFx0XHR2YXIgJGUgPSAkKGUpO1xyXG5cdFx0XHR2YXIgaW1nID0gJGUuY2hpbGRyZW4oXCJpbWdcIilbMF07XHJcblx0XHRcdHZhciBsaW5rID0gJChpbWcgPyAkKGltZykuY2xvc2VzdChcImFcIikgOiAkZSkuYXR0cihcImhyZWZcIik7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZWxlbSA9IGltZyB8fCBlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHQvL0FkZCB0b29sdGlwc1xyXG5cdFx0XHR2YXIgb3QgPSAkKGVsZW0pLm9wZW50aXAoXCJKdXN0IGEgbW9tZW50Li4uXCIsIHtcclxuXHRcdFx0XHRzdHlsZTogXCJwcm9maWxlVGlwXCIsXHJcblx0XHRcdFx0YWpheDogbGluayxcclxuXHRcdFx0XHRhamF4SUQ6IGxpbmtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0Ly9Hcm91cCBUaXBzXHJcblx0aWYgKHN0b3JhZ2VbbWUuZW1haWxdW1wiZ3JvdXBfdGlwc1wiXSkge1xyXG5cdFx0Ly9BZGQgZ3JvdXAgaG92ZXIgdGlwc1xyXG5cdFx0JCgnYVtocmVmKj1cIi9ncm91cC9cIl0nKS5ub3QoJ1tocmVmKj1cIi90cmFja3NcIl0sIFtocmVmKj1cIi9tZW1iZXJzXCJdLCBbaHJlZio9XCI/cGFnZT1cIl0nKS5lYWNoKGZ1bmN0aW9uKGksIGUpIHtcclxuXHRcdFx0Ly9JZiBhbiBpbWFnZSBpcyBpbnNpZGUgdGhlIGxpbmssIHRvb2x0aXAgdGhlIGltYWdlXHJcblx0XHRcdHZhciAkZSA9ICQoZSk7XHJcblx0XHRcdHZhciBpbWcgPSAkZS5jaGlsZHJlbihcImltZ1wiKVswXTtcclxuXHRcdFx0dmFyIGxpbmsgPSAkKGltZyA/ICQoaW1nKS5jbG9zZXN0KFwiYVwiKSA6ICRlKS5hdHRyKFwiaHJlZlwiKTtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBlbGVtID0gaW1nIHx8IGU7XHJcblx0XHRcdFx0XHJcblx0XHRcdC8vQWRkIHRvb2x0aXBzXHJcblx0XHRcdHZhciBvdCA9ICQoZWxlbSkub3BlbnRpcChcIkp1c3QgYSBtb21lbnQuLi5cIiwge1xyXG5cdFx0XHRcdHN0eWxlOiBcImdyb3VwVGlwXCIsXHJcblx0XHRcdFx0YWpheDogbGluayxcclxuXHRcdFx0XHRhamF4SUQ6IGxpbmtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0Ly9Jbml0aWFsaXplIHN0aWNreSBzaWRlYmFyc1xyXG5cdGlmIChzdG9yYWdlW21lLmVtYWlsXVtcInN0aWNreV9zaWRlYmFyc1wiXSkgc3RpY2t5X3NpZGViYXJzKCk7XHJcblx0XHJcblx0Ly9Hcm91cCBwYWdlXHJcblx0aWYgKGxvY2F0aW9uLmhyZWYubWF0Y2goL1xcL2dyb3VwXFwvLykpIHtcclxuXHRcdC8vR2VuZXJhdGUgd2F0Y2hsaXN0IFVJXHJcblx0XHR3YXRjaGxpc3RfdWkoKTtcclxuXHRcclxuXHRcdC8vSW5pdGlhbGl6ZSBncm91cCBtb2RzXHJcblx0XHRpZiAoc3RvcmFnZVttZS5lbWFpbF1bXCJncm91cF9tb2RzXCJdKSB7XHJcblx0XHRcdC8vZ3JvdXBfbW9kcygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvL0dyb3VwIGxpc3QgcGFnZVxyXG5cdGlmIChsb2NhdGlvbi5ocmVmLm1hdGNoKC9cXC9ncm91cHMvKSkge1xyXG5cdFx0Ly9Jbml0aWFsaXplIGdyb3VwIG1vZHNcclxuXHRcdGlmIChzdG9yYWdlW21lLmVtYWlsXVtcImdyb3VwX21vZHNcIl0pIHtcclxuXHRcdFx0Z3JvdXBfbW9kcygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvL1RyYWNrIHBhZ2VcclxuXHRpZiAobG9jYXRpb24uaHJlZi5tYXRjaCgvXFwvdXNlclxcL1tcXHctXSpcXC90cmFja1xcLy8pKSB7XHJcblx0XHQvL0dlbmVyYXRlIHdhdGNobGlzdCBVSVxyXG5cdFx0d2F0Y2hsaXN0X3VpKCk7XHJcblx0fVxyXG5cdFxyXG5cdC8vUGxheWVyIHdpZGdldFxyXG5cdGlmIChsb2NhdGlvbi5ocmVmLm1hdGNoKC9cXHBsYXllclxcLy8pKSB7XHJcblx0XHQvL0F0dGFjaCBwbGF5IGV2ZW50IGhhbmRsZXIsIGlmIG5lZWRlZFxyXG5cdFx0aWYgKHN0b3JhZ2VbbWUuZW1haWxdW1wic21hcnRfcGxheWVyXCJdKSB7XHJcblx0XHRcdCRwbGF5ZXIub24oXCJwbGF5XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vU2VuZCBwYXVzZSBldmVyeXRoaW5nIG1lc3NhZ2VcclxuXHRcdFx0XHRjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7YWN0aW9uOiBcIm1vZGF0aW9uLXBhdXNlLWV2ZXJ5dGhpbmdcIiwgZ3VpZDogZ3VpZH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vSW5pdGlhbGl6ZSBzbWFsbCBwbGF5ZXJcclxuXHRcdFx0c21hbGxfcGxheWVyKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vQWRkIHBsYXllciBhY3Rpb25zXHJcblx0XHRpZiAoc3RvcmFnZVttZS5lbWFpbF1bXCJwbGF5ZXJfYWN0aW9uc1wiXSkge1xyXG5cdFx0XHRwbGF5ZXJfYWN0aW9ucygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvL0ZlZWRcclxuXHRpZiAobG9jYXRpb24uaHJlZi5tYXRjaCgvXFwvZmVlZC8pKSB7XHJcblx0XHQvL0luaXRpYWxpemUgZHluYW1pYyBmZWVkXHJcblx0XHRpZiAoc3RvcmFnZVttZS5lbWFpbF1bXCJkeW5hbWljX2ZlZWRcIl0pIHtcclxuXHRcdFx0Ly9keW5hbWljX2ZlZWQoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly9Jbml0aWFsaXplIHNtYWxsIGZlZWRcclxuXHRcdGlmIChzdG9yYWdlW21lLmVtYWlsXVtcInNtYWxsX2ZlZWRcIl0pIHtcclxuXHRcdFx0c21hbGxfZmVlZCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvL0NvbW1lbnQgVGFnc1xyXG5cdGlmIChzdG9yYWdlW21lLmVtYWlsXVtcImNvbW1lbnRfdGFnc1wiXSkge1xyXG5cdFx0Y29tbWVudF90YWdzKCk7XHJcblx0fVxyXG5cdFxyXG5cdC8vQ2hyb21lIHN0dWRpb1xyXG5cdGlmIChsb2NhdGlvbi5ocmVmLm1hdGNoKC9jaHJvbWUuc291bmRhdGlvbi5jb20vKSkge1xyXG5cdFx0YWZkU3R1ZGlvKCk7XHJcblx0fVxyXG5cdFxyXG5cdC8vUmVzdCBvZiB0aGUgc2l0ZVxyXG5cdGVsc2Uge1xyXG5cdFx0YWZkQ29tbXVuaXR5KCk7XHJcblx0fS8qXHJcbn0qL1xyXG5cclxuLy9Jbml0aWFsaXplIHRyYWNrc1xyXG4vKmZ1bmN0aW9uIGluaXRUcmFja3MoKSB7XHJcblx0dmFyICRteVRyYWNrcyA9ICQoXCIuZmVlZC1pdGVtLnRyYWNrXCIpLmhhcyhcIi5pbmZvIGFbaHJlZj0nXCIgKyBtZS5saW5rICsgXCInXVwiKTtcclxuXHRcclxuXHQvL0ZlZWQgaGFzIGVkaXRhYmxlIHRyYWNrc1xyXG5cdGlmICgkbXlUcmFja3MubGVuZ3RoKSB7XHJcblx0XHQvL0l0ZXJhdGUgdHJhY2tzXHJcblx0XHQkbXlUcmFja3MuZWFjaChmdW5jdGlvbihpLCBlKSB7XHJcblx0XHRcdHZhciAkdHJhY2sgPSAkKHRoaXMpO1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHNob3J0bGluayA9ICR0cmFjay5maW5kKFwiLnNoYXJlLXNoZWV0IGlucHV0XCIpLnZhbCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc29sZS5sb2coXCJzaG9ydGxpbms6ICVvXCIsIHNob3J0bGluayk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0qL1xyXG5cclxuLyogV2F0Y2hsaXN0IFVJIGdlbmVyYXRpb24gKi9cclxuLypmdW5jdGlvbiB3YXRjaGxpc3RfdWkoKSB7XHJcblx0dmFyIGlzR3JvdXAgPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9cXC9ncm91cFxcLy8pO1xyXG5cdHZhciBpc1RyYWNrID0gbG9jYXRpb24uaHJlZi5tYXRjaCgvXFwvdXNlclxcL1tcXHctXSpcXC90cmFja1xcLy8pO1xyXG5cdHZhciBsaW5rID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKFwiaHR0cDovL3NvdW5kYXRpb24uY29tL1wiLCAnJykuc3BsaXQoXCI/XCIpWzBdO1xyXG5cdHZhciB0aXRsZSA9IFwiVGl0bGVcIjtcclxuXHR2YXIgZW1haWwgPSBtZS5lbWFpbDtcclxuXHR2YXIgaXNXYXRjaGVkID0gaXNfd2F0Y2hlZChsaW5rKTtcclxuXHR2YXIgaXNRdWV1ZWQgPSBpc19xdWV1ZWQobGluayk7XHJcblx0XHRcdFx0XHJcblx0Ly9JcyB0cmFja1xyXG5cdGlmIChpc1RyYWNrKSB7XHJcblx0XHR0aXRsZSA9ICQoXCIjbWFpbiAudGl0bGVcIikudGV4dCgpO1xyXG5cdH1cclxuXHRcclxuXHQvL0lzIGdyb3VwXHJcblx0ZWxzZSBpZiAoaXNHcm91cCkge1xyXG5cdFx0dGl0bGUgPSAkKFwiI2dyb3VwLWluZm8gaDJcIikuaHRtbCgpO1xyXG5cdH1cclxuXHRcclxuXHQvKmlmIChpc1dhdGNoZWQpIHtcclxuXHRcdC8vYWxlcnQoXCJ5b3UgYXJlIGJlaW5nIHdhdGNoZWRcIik7XHJcblx0fVxyXG5cdFxyXG5cdGlmIChpc1F1ZXVlZCkge1xyXG5cdFx0Ly9hbGVydChcInlvdSBhcmUgcXVldWVkIHRvIGlzcGxvb29vb2RlLlwiKTtcclxuXHR9XHJcblx0XHJcblx0X2dlbmVyYXRlKCk7XHJcblx0XHJcblx0Ly9HZW5lcmF0ZSBidXR0b25zXHJcblx0ZnVuY3Rpb24gX2dlbmVyYXRlKCkge1xyXG5cdFx0JGJ1dHRvbiA9IF9mYWN0b3J5KFwibW9kYXRpb25fd2F0Y2hcIik7XHJcblx0XHRcclxuXHRcdC8vR3JvdXAgaGFuZGxlclxyXG5cdFx0aWYgKGlzR3JvdXApIHtcclxuXHRcdFx0JChcIiNncm91cC1pbmZvIC5qb2luXCIpLmFwcGVuZChcIjxicj5cIikuYXBwZW5kKCRidXR0b24pO1xyXG5cdFx0XHQkKFwiLm1vZGF0aW9uX3dhdGNoXCIpLmNzcyhcImZsb2F0XCIsIFwicmlnaHRcIik7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vVHJhY2sgaGFuZGxlclxyXG5cdFx0aWYgKGlzVHJhY2spIHtcclxuXHRcdFx0JChcIiNtYWluIC50aXRsZVwiKS5hcHBlbmQoJGJ1dHRvbik7XHJcblx0XHR9XHJcblx0XHRcdFxyXG5cdFx0Ly9JcyB3YXRjaGVkXHJcblx0XHRpZiAoaXNXYXRjaGVkKSB7XHJcblx0XHRcdCQoXCIubW9kYXRpb25fd2F0Y2hcIikub2ZmKFwiY2xpY2tcIik7XHJcblx0XHRcdCQoXCIubW9kYXRpb25fd2F0Y2hcIikuaHRtbChcIlVud2F0Y2hcIik7XHJcblx0XHRcdCQoXCIubW9kYXRpb25fd2F0Y2hcIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly9hbGVydChcImZpcnN0IHVud2F0Y2hcIik7XHJcblx0XHRcdFx0ZGVsZXRlX3dhdGNobGlzdCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly9Ob3Qgd2F0Y2hlZFxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdCQoXCIubW9kYXRpb25fd2F0Y2hcIikub2ZmKFwiY2xpY2tcIik7XHJcblx0XHRcdCQoXCIubW9kYXRpb25fd2F0Y2hcIikuaHRtbChcIldhdGNoXCIpO1xyXG5cdFx0XHQkKFwiLm1vZGF0aW9uX3dhdGNoXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vYWxlcnQoXCJmaXJzdCB3YXRjaFwiKTtcclxuXHRcdFx0XHRhZGRfd2F0Y2hsaXN0KCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvL0lzIHF1ZXVlZFxyXG5cdFx0aWYgKGlzUXVldWVkKSB7XHJcblx0XHRcdGRlbGV0ZV9xdWV1ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvL0NoYW5nZSBoYW5kbGVyc1xyXG5cdGZ1bmN0aW9uIF9oYW5kbGUoc3RhdGUpIHtcclxuXHRcdC8vSXMgd2F0Y2hlZFxyXG5cdFx0aWYgKHN0YXRlKSB7XHJcblx0XHRcdCQoXCIubW9kYXRpb25fd2F0Y2hcIikub2ZmKFwiY2xpY2tcIik7XHJcblx0XHRcdCQoXCIubW9kYXRpb25fd2F0Y2hcIikuaHRtbChcIlVud2F0Y2hcIik7XHJcblx0XHRcdCQoXCIubW9kYXRpb25fd2F0Y2hcIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly9hbGVydChcInNlY29uZCB1bndhdGNoXCIpO1xyXG5cdFx0XHRcdGRlbGV0ZV93YXRjaGxpc3QoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vTm90IHdhdGNoZWRcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHQkKFwiLm1vZGF0aW9uX3dhdGNoXCIpLm9mZihcImNsaWNrXCIpO1xyXG5cdFx0XHQkKFwiLm1vZGF0aW9uX3dhdGNoXCIpLmh0bWwoXCJXYXRjaFwiKTtcclxuXHRcdFx0JChcIi5tb2RhdGlvbl93YXRjaFwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvL2FsZXJ0KFwic2Vjb25kIHdhdGNoXCIpO1xyXG5cdFx0XHRcdGFkZF93YXRjaGxpc3QoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvL0FkZCB0byB3YXRjaGxpc3RcclxuXHRmdW5jdGlvbiBhZGRfd2F0Y2hsaXN0KCkge1xyXG5cdFx0dmFyIGQgPSBzdG9yYWdlO1xyXG5cdFx0XHJcblx0XHR2YXIgd2F0Y2hsaXN0ID0gZFtlbWFpbF1bJ3dhdGNobGlzdCddO1xyXG5cdFx0dmFyIG5ld0l0ZW0gPSB0cnVlO1xyXG5cdFx0XHJcblx0XHQkLmVhY2god2F0Y2hsaXN0LCBmdW5jdGlvbihpLCB2KSB7XHJcblx0XHRcdC8vRW5zdXJlIG5vIGR1cGxpY2F0ZXMgd2lsbCBiZSBjcmVhdGVkXHJcblx0XHRcdGlmICh2WydsaW5rJ10gPT0gbGluaykge1xyXG5cdFx0XHRcdG5ld0l0ZW0gPSBmYWxzZTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vQWRkIG5ldyB3YXRjaGxpc3QgaXRlbSBhbmQgdXBkYXRlXHJcblx0XHRpZiAobmV3SXRlbSkge1xyXG5cdFx0XHRkW2VtYWlsXVsnd2F0Y2hsaXN0J10ucHVzaCh7bGluazogbGluaywgdGl0bGU6IHRpdGxlfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvL1JlYXBwbHkgaGFuZGxlcnNcclxuXHRcdFx0X2hhbmRsZSh0cnVlKTtcclxuXHRcdFx0XHJcblx0XHRcdGNyYXBpLnVwZGF0ZShlbWFpbCwgZFtlbWFpbF0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvL1JlbW92ZSBmcm9tIHdhdGNobGlzdFxyXG5cdGZ1bmN0aW9uIGRlbGV0ZV93YXRjaGxpc3QoKSB7XHJcblx0XHR2YXIgZCA9IHN0b3JhZ2U7XHJcblx0XHRcclxuXHRcdHZhciB3YXRjaGxpc3QgPSBkW2VtYWlsXVsnd2F0Y2hsaXN0J107XHJcblx0XHR2YXIgaGFzSXRlbSA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHQkLmVhY2god2F0Y2hsaXN0LCBmdW5jdGlvbihpLCB2KSB7XHJcblx0XHRcdC8vRW5zdXJlIG5vIGR1cGxpY2F0ZXMgd2lsbCBiZSBjcmVhdGVkXHJcblx0XHRcdGlmICh2WydsaW5rJ10gPT0gbGluaykge1xyXG5cdFx0XHRcdGRbZW1haWxdWyd3YXRjaGxpc3QnXS5zcGxpY2UoaSwgMSk7XHJcblx0XHRcdFx0aGFzSXRlbSA9IHRydWU7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvL0RlbGV0ZSB3YXRjaGxpc3QgaXRlbSBhbmQgdXBkYXRlXHJcblx0XHRpZiAoaGFzSXRlbSkge1x0XHRcdFxyXG5cdFx0XHQvL1JlYXBwbHkgaGFuZGxlcnNcclxuXHRcdFx0X2hhbmRsZShmYWxzZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjcmFwaS51cGRhdGUoZW1haWwsIGRbZW1haWxdKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly9SZW1vdmUgZnJvbSBxdWV1ZVxyXG5cdGZ1bmN0aW9uIGRlbGV0ZV9xdWV1ZSgpIHtcclxuXHRcdHZhciBkID0gc3RvcmFnZTtcclxuXHRcdFxyXG5cdFx0dmFyIHF1ZXVlID0gZFtlbWFpbF1bJ3dhdGNobGlzdC1xdWV1ZSddO1xyXG5cdFx0dmFyIGhhc0l0ZW0gPSBmYWxzZTtcclxuXHRcdFxyXG5cdFx0JC5lYWNoKHF1ZXVlLCBmdW5jdGlvbihpLCB2KSB7XHJcblx0XHRcdC8vRW5zdXJlIG5vIGR1cGxpY2F0ZXMgd2lsbCBiZSBjcmVhdGVkXHJcblx0XHRcdGlmICh2WydsaW5rJ10gPT0gbGluaykge1xyXG5cdFx0XHRcdC8vR3JhYiB3YXRjaGxpc3QgaXRlbVxyXG5cdFx0XHRcdHZhciB3YXRjaGxpc3RJdGVtID0gZFtlbWFpbF1bJ3dhdGNobGlzdCddW3YuaW5kZXhdO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vSXRlcmF0ZSBwcm9wZXJ0aWVzXHJcblx0XHRcdFx0Zm9yICh2YXIgcHJvcCBpbiB2LnN0YXRlKSB3YXRjaGxpc3RJdGVtW3Byb3BdID0gdi5zdGF0ZVtwcm9wXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvL1B1c2ggdXBkYXRlZCB3YXRjaGxpc3QgYmFjayBpbnRvIHN0b3JhZ2VcclxuXHRcdFx0XHRkW2VtYWlsXVsnd2F0Y2hsaXN0J11bdi5pbmRleF0gPSB3YXRjaGxpc3RJdGVtO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vUmVtb3ZlIHF1ZXVlIGl0ZW1cclxuXHRcdFx0XHRkW2VtYWlsXVsnd2F0Y2hsaXN0LXF1ZXVlJ10uc3BsaWNlKGksIDEpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGhhc0l0ZW0gPSB0cnVlO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly9EZWxldGUgd2F0Y2hsaXN0IGl0ZW0gYW5kIHVwZGF0ZVxyXG5cdFx0aWYgKGhhc0l0ZW0pIHtcclxuXHRcdFx0Y29uc29sZS5pbmZvKFwiTW9kYXRpb24gOjogUXVldWUgY2xlYXJlZCFcIik7XHJcblx0XHRcdGNyYXBpLnVwZGF0ZShlbWFpbCwgZFtlbWFpbF0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvL0NoZWNrIHdhdGNobGlzdCBzdGF0dXNcclxuXHRmdW5jdGlvbiBpc193YXRjaGVkKGxpbmspIHtcclxuXHRcdHZhciBkID0gc3RvcmFnZTtcclxuXHRcdFxyXG5cdFx0dmFyIHdhdGNobGlzdCA9IGRbZW1haWxdWyd3YXRjaGxpc3QnXTtcclxuXHRcdHZhciBpc0xpc3RlZCA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHQvL0l0ZXJhdGUgd2F0Y2hsaXN0IGl0ZW1zXHJcblx0XHQkLmVhY2god2F0Y2hsaXN0LCBmdW5jdGlvbihpLCB2KSB7XHJcblx0XHRcdGlmICh2WydsaW5rJ10gPT0gbGluaykge1xyXG5cdFx0XHRcdGlzTGlzdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiBpc0xpc3RlZDtcclxuXHR9XHJcblx0XHJcblx0Ly9DaGVjayB3YXRjaGxpc3QgcXVldWVcclxuXHRmdW5jdGlvbiBpc19xdWV1ZWQobGluaykge1xyXG5cdFx0dmFyIGQgPSBzdG9yYWdlO1xyXG5cdFx0XHJcblx0XHR2YXIgcXVldWUgPSBkW2VtYWlsXVsnd2F0Y2hsaXN0LXF1ZXVlJ107XHJcblx0XHR2YXIgaXNRdWV1ZWQgPSBmYWxzZTtcclxuXHRcdFxyXG5cdFx0Ly9JdGVyYXRlIHdhdGNobGlzdCBpdGVtc1xyXG5cdFx0JC5lYWNoKHF1ZXVlLCBmdW5jdGlvbihpLCB2KSB7XHJcblx0XHRcdGlmICh2WydsaW5rJ10gPT0gbGluaykge1xyXG5cdFx0XHRcdGlzUXVldWVkID0gdHJ1ZTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiBpc1F1ZXVlZDtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzQWZkKCkge1xyXG5cdHZhciBhZmQgPSBtb21lbnQoKTtcclxuXHRhZmQubW9udGgoMyk7IC8vQXByaWxcclxuXHRhZmQuZGF0ZSgxKTsgLy8xc3RcclxuXHRcclxuXHRyZXR1cm4gbW9tZW50KCkuaXNTYW1lKGFmZCwgXCJkYXlcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFmZFN0dWRpbygpIHtcclxuXHRpZiAoIWlzQWZkKCkpIHJldHVybjtcclxuXHRcclxuXHQvL1NldCB1cCBwYWdlXHJcblx0JChcImh0bWwsIGJvZHlcIikuaGVpZ2h0KFwiMTAwJVwiKTtcclxuXHRcclxuXHQkKFwiaHRtbFwiKS5vbihcImNsaWNrXCIsIFwiYnV0dG9uLCBhXCIsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblx0XHRcclxuXHRcdCR0aGlzLnRvZ2dsZUNsYXNzKFwiYWZkLW1pcnJvclwiKTtcclxuXHR9KTtcclxuXHRcclxuXHQvL1NldCB1cCBBcHJpbEFwcmlsXHJcblx0dmFyIGFwcmlsID0gbmV3IEFwcmlsQXByaWwoe1xyXG5cdFx0cm90YXRlOiB0cnVlXHJcblx0fSk7XHJcblx0XHJcblx0Ly86RFxyXG5cdC8vYXByaWwuZm9vbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZmRDb21tdW5pdHkoKSB7XHJcblx0aWYgKCFpc0FmZCgpKSByZXR1cm47XHJcblx0XHJcblx0Ly9TZXQgdXAgQXByaWxBcHJpbFxyXG5cdHZhciBhcHJpbCA9IG5ldyBBcHJpbEFwcmlsKHtcclxuXHRcdHJlcGxhY2VJbWFnZXM6IHRydWUsXHJcblx0XHRzY3JhbWJsZUxpbmtzOiB0cnVlXHJcblx0fSk7XHJcblx0XHJcblx0Ly86RFxyXG5cdGFwcmlsLmZvb2woKTtcclxufSovIl19
